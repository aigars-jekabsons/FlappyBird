(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Interface = function () {
    function Interface(game) {
        _classCallCheck(this, Interface);

        this.game = game;
        this.score = 0;
        this.time = 0;
        this.scoreText = $("#score");
        this.timeText = $("#time");
    }

    _createClass(Interface, [{
        key: "create",
        value: function create() {
            this.reset();
        }
    }, {
        key: "incrementScore",
        value: function incrementScore() {
            this.scoreText.text("Score: " + this.score++);
        }
    }, {
        key: "incrementTime",
        value: function incrementTime() {
            this.timeText.text("Time: " + this.time++ + "s");
        }
    }, {
        key: "getScore",
        value: function getScore() {
            return this.score;
        }
    }, {
        key: "reset",
        value: function reset() {
            this.score = 0;
            this.time = 0;
            this.scoreText.show();
            this.timeText.show();
            this.scoreText.text("Score: " + this.score);
            this.timeText.text("Time: " + this.time + "s");
        }
    }]);

    return Interface;
}();

exports.default = Interface;

},{}],2:[function(require,module,exports){
'use strict';

var _Boot = require('./states/Boot');

var _Boot2 = _interopRequireDefault(_Boot);

var _Preloader = require('./states/Preloader');

var _Preloader2 = _interopRequireDefault(_Preloader);

var _Title = require('./states/Title');

var _Title2 = _interopRequireDefault(_Title);

var _Main = require('./states/Main');

var _Main2 = _interopRequireDefault(_Main);

var _GameOver = require('./states/GameOver');

var _GameOver2 = _interopRequireDefault(_GameOver);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Game = function (_Phaser$Game) {
  _inherits(Game, _Phaser$Game);

  function Game() {
    _classCallCheck(this, Game);

    var _this = _possibleConstructorReturn(this, (Game.__proto__ || Object.getPrototypeOf(Game)).call(this, window.innerWidth * window.devicePixelRatio, window.innerHeight * window.devicePixelRatio, Phaser.AUTO));

    _this.state.add('Boot', _Boot2.default, false);
    _this.state.add('Preloader', _Preloader2.default, false);
    _this.state.add('Title', _Title2.default, false);
    _this.state.add('Main', _Main2.default, false);
    _this.state.add('GameOver', _GameOver2.default, false);

    _this.state.start('Boot');
    return _this;
  }

  return Game;
}(Phaser.Game);

new Game();

},{"./states/Boot":6,"./states/GameOver":7,"./states/Main":8,"./states/Preloader":9,"./states/Title":10}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Background = function () {
    function Background(game, texture) {
        _classCallCheck(this, Background);

        this.game = game;
        this.texture = texture;
        this.background = null;
    }

    _createClass(Background, [{
        key: "create",
        value: function create() {
            this.background = this.game.add.tileSprite(0, 0, this.game.width, this.game.height, this.texture);
            this.background.tileScale.setTo(this.background.height / this.background.texture.height);
        }
    }, {
        key: "update",
        value: function update() {
            this.background.tilePosition.x -= 2;
        }
    }]);

    return Background;
}();

exports.default = Background;

},{}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Obstacle = function () {
    function Obstacle(game, numObstacles, framesPerObstacle) {
        _classCallCheck(this, Obstacle);

        this.game = game;
        this.obstacleGroup = null;
        this.spriteGroup = null;
        this.obstacleSpeed = 300;
        this.numObstacles = numObstacles;
        this.framesPerObstacle = framesPerObstacle;

        var seed = Date.now();
        this.random = new Phaser.RandomDataGenerator([seed]);

        this.initObstacles();
    }

    _createClass(Obstacle, [{
        key: 'initObstacles',
        value: function initObstacles() {

            this.obstacleMinSize = 50;
            this.obstacleMaxSize = 200;

            this.spriteGroup = this.game.add.group();
            this.spriteGroup.enableBody = true;
            this.spriteGroup.createMultiple(10, 'birds');
        }
    }, {
        key: 'create',
        value: function create() {
            var obstacle = this.spriteGroup.getFirstDead(true);

            //this.spriteGroup.resetChild(obstacle, this.game.world.width, this.random.integerInRange(0, this.game.world.height - obstacleSize), obstacleSpriteTexture);

            obstacle.reset(this.game.world.width, this.random.integerInRange(0, this.game.world.height));

            var randomBird = this.random.integerInRange(0, this.numObstacles / this.framesPerObstacle) * this.framesPerObstacle;

            obstacle.frame = randomBird;
            obstacle.animations.add('fly', [randomBird, randomBird + 1], 5, true);
            obstacle.animations.play('fly');
            obstacle.anchor.setTo(.5, .5);
            obstacle.scale.x = -0.5;
            obstacle.scale.y = 0.5;

            obstacle.body.gravity.y = 0;

            obstacle.body.velocity.x = -this.obstacleSpeed;
            obstacle.body.immovable = true;

            //When the block leaves the screen, kill it
            obstacle.checkWorldBounds = true;
            obstacle.outOfBoundsKill = true;
        }
    }, {
        key: 'render',
        value: function render(debug) {
            if (debug) {
                var game = this.game;
                this.spriteGroup.forEach(function (sprite) {
                    game.debug.body(sprite);
                });
            }
        }
    }]);

    return Obstacle;
}();

exports.default = Obstacle;

},{}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Player = function () {
    function Player(game) {
        _classCallCheck(this, Player);

        this.game = game;
        this.isRising = false;
        this.sprite = null;
    }

    _createClass(Player, [{
        key: 'create',
        value: function create() {
            var playerSprite = new Phaser.Graphics(this.game).beginFill(Phaser.Color.hexToRGB('#2c3e50'), 1).drawRect(0, 0, 100, 100);

            var spriteTexture = playerSprite.generateTexture();

            this.sprite = this.game.add.sprite(this.game.world.centerX, this.game.world.centerY, 'player');
            //this.sprite = this.game.add.sprite(this.game.world.centerX, this.game.world.centerY, spriteTexture);

            //this.sprite.anchor.setTo(0.5, 0.5);
            this.sprite.scale.set(0.5);
            this.game.physics.arcade.enable(this.sprite);
            this.sprite.enableBody = true;

            this.sprite.animations.add('fly', Phaser.Animation.generateFrameNames('', 1, 2, '.png', 4), 5, true);
            this.sprite.animations.play('fly');

            this.sprite.body.gravity.y = 500;
            this.sprite.body.velocity.y = -200;
            this.sprite.body.maxVelocity.y = 200;
            this.sprite.body.collideWorldBounds = false;

            //calculate centre for bounding box
            var scaleFactor = 0.9;
            /*
            let newWidth = this.sprite.width * scaleFactor;
            let newHeight = this.sprite.height * scaleFactor
            let centreX = (this.sprite.width - (newWidth)) /2;
            let centreY = (this.sprite.height - (newHeight)) /2;
            this.sprite.body.width *= scaleFactor;*/
            this.sprite.body.height *= scaleFactor; /*
                                                    this.sprite.body.setSize(newWidth, newHeight, centreX, centreY);*/
        }
    }, {
        key: 'setRising',
        value: function setRising() {
            this.isRising = true;
        }
    }, {
        key: 'setFalling',
        value: function setFalling() {
            this.isRising = false;
        }
    }, {
        key: 'increaseVerticalVelocity',
        value: function increaseVerticalVelocity() {
            this.sprite.body.velocity.y -= 30;
        }
    }, {
        key: 'isOutOfBounds',
        value: function isOutOfBounds() {

            var position = this.sprite.body.position.y;

            return position > this.game.world.height || position < 0;
        }
    }, {
        key: 'render',
        value: function render(debug) {
            if (debug) {
                this.game.debug.body(this.sprite);
                this.game.debug.pixel(this.sprite.x, this.sprite.y, 'red', 4);
                this.game.debug.spriteBounds(this.sprite);
            }
        }
    }]);

    return Player;
}();

exports.default = Player;

},{}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Boot = function (_Phaser$State) {
    _inherits(Boot, _Phaser$State);

    function Boot() {
        _classCallCheck(this, Boot);

        return _possibleConstructorReturn(this, (Boot.__proto__ || Object.getPrototypeOf(Boot)).apply(this, arguments));
    }

    _createClass(Boot, [{
        key: 'preload',
        value: function preload() {
            this.game.load.atlas('preloader', 'images/preloader.png', 'images/preloader.json');
        }
    }, {
        key: 'create',
        value: function create() {
            this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
            this.game.state.start('Preloader');
        }
    }]);

    return Boot;
}(Phaser.State);

exports.default = Boot;

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GameOver = function (_Phaser$State) {
    _inherits(GameOver, _Phaser$State);

    function GameOver() {
        _classCallCheck(this, GameOver);

        return _possibleConstructorReturn(this, (GameOver.__proto__ || Object.getPrototypeOf(GameOver)).apply(this, arguments));
    }

    _createClass(GameOver, [{
        key: 'create',
        value: function create() {
            var style = { font: '65px Arial', fill: '#000000', align: 'center' };
            this.titleText = this.game.add.text(this.game.world.centerX, 100, 'Game Over!', style);
            this.titleText.anchor.setTo(0.5, 0.5);

            this.congratsText = this.game.add.text(this.game.world.centerX, 200, 'You Win!', { font: '32px Arial', fill: '#000', align: 'center' });
            this.congratsText.anchor.setTo(0.5, 0.5);

            this.instructionText = this.game.add.text(this.game.world.centerX, 300, 'Click To Play Again', { font: '16px Arial', fill: '#000', align: 'center' });
            this.instructionText.anchor.setTo(0.5, 0.5);
        }
    }, {
        key: 'restartGame',
        value: function restartGame() {
            this.game.state.start("Main");
        }
    }, {
        key: 'update',
        value: function update() {
            if (this.game.input.activePointer.justPressed()) {
                this.game.state.start('Main');
            }
        }
    }]);

    return GameOver;
}(Phaser.State);

exports.default = GameOver;

},{}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Player = require('../objects/Player');

var _Player2 = _interopRequireDefault(_Player);

var _Obstacle = require('../objects/Obstacle');

var _Obstacle2 = _interopRequireDefault(_Obstacle);

var _Interface = require('../controllers/Interface');

var _Interface2 = _interopRequireDefault(_Interface);

var _Background = require('../objects/Background');

var _Background2 = _interopRequireDefault(_Background);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Main = function (_Phaser$State) {
    _inherits(Main, _Phaser$State);

    function Main() {
        _classCallCheck(this, Main);

        return _possibleConstructorReturn(this, (Main.__proto__ || Object.getPrototypeOf(Main)).apply(this, arguments));
    }

    _createClass(Main, [{
        key: 'create',
        value: function create() {
            var _this2 = this;

            $('#name').hide();
            //Enable Arcade Physics
            this.game.physics.startSystem(Phaser.Physics.ARCADE);

            //Set the games background colour
            this.game.stage.backgroundColor = '#cecece';

            this.background = new _Background2.default(this.game, 'mountain_bg');
            this.background.create();

            this.player = new _Player2.default(this.game);
            this.player.create();

            this.obstacles = new _Obstacle2.default(this.game, 10, 2);

            this.interface = new _Interface2.default(this.game);
            this.interface.create();

            this.addControls();
            this.addTimers();

            // socket.io
            this.socket = io();
            this.socket.on('control-change', function (msg) {
                if (msg === '0') {
                    _this2.player.setFalling();
                } else {
                    _this2.player.setRising();
                }
            });
        }
    }, {
        key: 'update',
        value: function update() {

            this.game.physics.arcade.overlap(this.player.sprite, this.obstacles.spriteGroup, this.endGame, null, this);

            // Check if out of bounds
            if (this.player.isOutOfBounds()) {
                this.endGame();
            }

            // Check if  helicopter is rising
            if (this.player.isRising) {
                this.player.increaseVerticalVelocity();
            }

            this.background.update();
        }
    }, {
        key: 'addControls',
        value: function addControls() {
            this.game.input.onDown.add(this.player.setRising, this.player);
            this.game.input.onUp.add(this.player.setFalling, this.player);
        }
    }, {
        key: 'addTimers',
        value: function addTimers() {
            this.game.time.events.loop(5000, this.obstacles.create, this.obstacles);
            this.game.time.events.loop(Phaser.Timer.SECOND, this.interface.incrementTime, this.interface);
            this.game.time.events.loop(1, this.interface.incrementScore, this.interface);
        }
    }, {
        key: 'endGame',
        value: function endGame() {

            var postData = {
                "id": this.uuidv4(),
                "name": $('#name').val(),
                "score": this.interface.getScore(),
                "time": new Date().getTime()
            };
            $.ajax({
                type: 'POST',
                url: 'https://qn907f9vwe.execute-api.eu-west-1.amazonaws.com/prod/scores',
                data: JSON.stringify(postData),
                dataType: 'JSON',
                contentType: "application/json",
                crossDomain: true
            });

            console.log(JSON.stringify(postData));
            this.socket.emit('score', JSON.stringify(postData));
            this.game.state.start('GameOver');
        }
    }, {
        key: 'render',
        value: function render() {
            this.player.render(false);
            this.obstacles.render(false);
        }
    }, {
        key: 'uuidv4',
        value: function uuidv4() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = Math.random() * 16 | 0,
                    v = c == 'x' ? r : r & 0x3 | 0x8;
                return v.toString(16);
            });
        }
    }]);

    return Main;
}(Phaser.State);

exports.default = Main;

},{"../controllers/Interface":1,"../objects/Background":3,"../objects/Obstacle":4,"../objects/Player":5}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Preloader = function (_Phaser$State) {
    _inherits(Preloader, _Phaser$State);

    function Preloader() {
        _classCallCheck(this, Preloader);

        return _possibleConstructorReturn(this, (Preloader.__proto__ || Object.getPrototypeOf(Preloader)).apply(this, arguments));
    }

    _createClass(Preloader, [{
        key: 'preload',
        value: function preload() {
            //this.asset = this.add.sprite(this.game.world.centerX, this.game.world.centerY, 'preloader');
            //this.asset.anchor.setTo(0.5, 0.5);

            this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
            //this.load.setPreloadSprite(this.asset);

            this.game.load.image('background', 'images/sky.png');
            this.game.load.image('grass_bg', 'images/grass_bg.png');
            this.game.load.image('mountain_bg', 'images/mountain_bg.png');
            //this.game.load.image('balloon_1', 'images/balloon_1.png');
            this.game.load.atlas('birds', 'images/birds.png', 'images/birds.json');
            this.game.load.atlas('player', 'images/player.png', 'images/player.json');
        }
    }, {
        key: 'create',
        value: function create() {
            //this.asset.cropEnabled = false;
            //this.game.state.start('Main');
        }
    }, {
        key: 'update',
        value: function update() {
            if (!!this.ready) {
                this.game.state.start('Title');
            }
        }
    }, {
        key: 'onLoadComplete',
        value: function onLoadComplete() {
            this.ready = true;
        }
    }]);

    return Preloader;
}(Phaser.State);

exports.default = Preloader;

},{}],10:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Background = require('../objects/Background');

var _Background2 = _interopRequireDefault(_Background);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Title = function (_Phaser$State) {
  _inherits(Title, _Phaser$State);

  function Title() {
    _classCallCheck(this, Title);

    return _possibleConstructorReturn(this, (Title.__proto__ || Object.getPrototypeOf(Title)).apply(this, arguments));
  }

  _createClass(Title, [{
    key: 'create',
    value: function create() {
      this.background = new _Background2.default(this.game, 'grass_bg');
      this.background.create();

      var style = { font: '65px Arial', fill: '#000000', align: 'center' };

      this.titleText = this.game.add.text(this.game.world.centerX, 300, 'Sonic BOOM!', style);
      this.titleText.anchor.setTo(0.5, 0.5);

      this.instructionsText = this.game.add.text(this.game.world.centerX, 400, 'Click anywhere to play', { font: '16px Arial', fill: '#000000', align: 'center' });
      this.instructionsText.anchor.setTo(0.5, 0.5);

      $('#name').show();
    }
  }, {
    key: 'update',
    value: function update() {
      var playerName = $("#name").val();
      if (playerName != "" && this.game.input.activePointer.justPressed()) {
        this.game.state.start('Main');
      }
    }
  }]);

  return Title;
}(Phaser.State);

exports.default = Title;

},{"../objects/Background":3}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJnYW1lXFxjb250cm9sbGVyc1xcSW50ZXJmYWNlLmpzIiwiZ2FtZVxcZ2FtZS5qcyIsImdhbWVcXG9iamVjdHNcXEJhY2tncm91bmQuanMiLCJnYW1lXFxvYmplY3RzXFxPYnN0YWNsZS5qcyIsImdhbWVcXG9iamVjdHNcXFBsYXllci5qcyIsImdhbWVcXHN0YXRlc1xcQm9vdC5qcyIsImdhbWVcXHN0YXRlc1xcR2FtZU92ZXIuanMiLCJnYW1lXFxzdGF0ZXNcXE1haW4uanMiLCJnYW1lXFxzdGF0ZXNcXFByZWxvYWRlci5qcyIsImdhbWVcXHN0YXRlc1xcVGl0bGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lDQU0sUztBQUNGLHVCQUFZLElBQVosRUFBa0I7QUFBQTs7QUFDZCxhQUFLLElBQUwsR0FBWSxJQUFaO0FBQ0EsYUFBSyxLQUFMLEdBQWEsQ0FBYjtBQUNBLGFBQUssSUFBTCxHQUFZLENBQVo7QUFDQSxhQUFLLFNBQUwsR0FBaUIsRUFBRSxRQUFGLENBQWpCO0FBQ0EsYUFBSyxRQUFMLEdBQWdCLEVBQUUsT0FBRixDQUFoQjtBQUNIOzs7O2lDQUVRO0FBQ0wsaUJBQUssS0FBTDtBQUNIOzs7eUNBRWdCO0FBQ2IsaUJBQUssU0FBTCxDQUFlLElBQWYsQ0FBb0IsWUFBWSxLQUFLLEtBQUwsRUFBaEM7QUFDSDs7O3dDQUVlO0FBQ1osaUJBQUssUUFBTCxDQUFjLElBQWQsQ0FBbUIsV0FBVyxLQUFLLElBQUwsRUFBWCxHQUF5QixHQUE1QztBQUNIOzs7bUNBRVU7QUFDUCxtQkFBTyxLQUFLLEtBQVo7QUFDSDs7O2dDQUVPO0FBQ0osaUJBQUssS0FBTCxHQUFhLENBQWI7QUFDQSxpQkFBSyxJQUFMLEdBQVksQ0FBWjtBQUNBLGlCQUFLLFNBQUwsQ0FBZSxJQUFmO0FBQ0EsaUJBQUssUUFBTCxDQUFjLElBQWQ7QUFDQSxpQkFBSyxTQUFMLENBQWUsSUFBZixDQUFvQixZQUFZLEtBQUssS0FBckM7QUFDQSxpQkFBSyxRQUFMLENBQWMsSUFBZCxDQUFtQixXQUFXLEtBQUssSUFBaEIsR0FBdUIsR0FBMUM7QUFDSDs7Ozs7O2tCQUlVLFM7Ozs7O0FDcENmOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7Ozs7Ozs7OztJQUVNLEk7OztBQUNKLGtCQUFjO0FBQUE7O0FBQUEsNEdBQ04sT0FBTyxVQUFQLEdBQW9CLE9BQU8sZ0JBRHJCLEVBQ3VDLE9BQU8sV0FBUCxHQUFxQixPQUFPLGdCQURuRSxFQUNxRixPQUFPLElBRDVGOztBQUVaLFVBQUssS0FBTCxDQUFXLEdBQVgsQ0FBZSxNQUFmLGtCQUE2QixLQUE3QjtBQUNBLFVBQUssS0FBTCxDQUFXLEdBQVgsQ0FBZSxXQUFmLHVCQUF1QyxLQUF2QztBQUNBLFVBQUssS0FBTCxDQUFXLEdBQVgsQ0FBZSxPQUFmLG1CQUErQixLQUEvQjtBQUNBLFVBQUssS0FBTCxDQUFXLEdBQVgsQ0FBZSxNQUFmLGtCQUE2QixLQUE3QjtBQUNBLFVBQUssS0FBTCxDQUFXLEdBQVgsQ0FBZSxVQUFmLHNCQUFxQyxLQUFyQzs7QUFFQSxVQUFLLEtBQUwsQ0FBVyxLQUFYLENBQWlCLE1BQWpCO0FBUlk7QUFTYjs7O0VBVmdCLE9BQU8sSTs7QUFhMUIsSUFBSSxJQUFKOzs7Ozs7Ozs7Ozs7O0lDbkJNLFU7QUFDRix3QkFBWSxJQUFaLEVBQWtCLE9BQWxCLEVBQTJCO0FBQUE7O0FBQ3ZCLGFBQUssSUFBTCxHQUFZLElBQVo7QUFDQSxhQUFLLE9BQUwsR0FBZSxPQUFmO0FBQ0EsYUFBSyxVQUFMLEdBQWtCLElBQWxCO0FBQ0g7Ozs7aUNBRVE7QUFDTCxpQkFBSyxVQUFMLEdBQWtCLEtBQUssSUFBTCxDQUFVLEdBQVYsQ0FBYyxVQUFkLENBQXlCLENBQXpCLEVBQTRCLENBQTVCLEVBQ2QsS0FBSyxJQUFMLENBQVUsS0FESSxFQUVkLEtBQUssSUFBTCxDQUFVLE1BRkksRUFHZCxLQUFLLE9BSFMsQ0FBbEI7QUFJQSxpQkFBSyxVQUFMLENBQWdCLFNBQWhCLENBQTBCLEtBQTFCLENBQWdDLEtBQUssVUFBTCxDQUFnQixNQUFoQixHQUF5QixLQUFLLFVBQUwsQ0FBZ0IsT0FBaEIsQ0FBd0IsTUFBakY7QUFDSDs7O2lDQUVRO0FBQ0wsaUJBQUssVUFBTCxDQUFnQixZQUFoQixDQUE2QixDQUE3QixJQUFrQyxDQUFsQztBQUNIOzs7Ozs7a0JBR1UsVTs7Ozs7Ozs7Ozs7OztJQ3BCVCxRO0FBRUYsc0JBQVksSUFBWixFQUFrQixZQUFsQixFQUFnQyxpQkFBaEMsRUFBa0Q7QUFBQTs7QUFFOUMsYUFBSyxJQUFMLEdBQVksSUFBWjtBQUNBLGFBQUssYUFBTCxHQUFxQixJQUFyQjtBQUNBLGFBQUssV0FBTCxHQUFtQixJQUFuQjtBQUNBLGFBQUssYUFBTCxHQUFxQixHQUFyQjtBQUNBLGFBQUssWUFBTCxHQUFvQixZQUFwQjtBQUNBLGFBQUssaUJBQUwsR0FBeUIsaUJBQXpCOztBQUVBLFlBQUksT0FBTyxLQUFLLEdBQUwsRUFBWDtBQUNBLGFBQUssTUFBTCxHQUFjLElBQUksT0FBTyxtQkFBWCxDQUErQixDQUFDLElBQUQsQ0FBL0IsQ0FBZDs7QUFFQSxhQUFLLGFBQUw7QUFDSDs7Ozt3Q0FFYzs7QUFFWCxpQkFBSyxlQUFMLEdBQXVCLEVBQXZCO0FBQ0EsaUJBQUssZUFBTCxHQUF1QixHQUF2Qjs7QUFFQSxpQkFBSyxXQUFMLEdBQW1CLEtBQUssSUFBTCxDQUFVLEdBQVYsQ0FBYyxLQUFkLEVBQW5CO0FBQ0EsaUJBQUssV0FBTCxDQUFpQixVQUFqQixHQUE4QixJQUE5QjtBQUNBLGlCQUFLLFdBQUwsQ0FBaUIsY0FBakIsQ0FBZ0MsRUFBaEMsRUFBb0MsT0FBcEM7QUFFSDs7O2lDQUVPO0FBQ0osZ0JBQUksV0FBVyxLQUFLLFdBQUwsQ0FBaUIsWUFBakIsQ0FBOEIsSUFBOUIsQ0FBZjs7QUFHQTs7QUFFQSxxQkFBUyxLQUFULENBQWUsS0FBSyxJQUFMLENBQVUsS0FBVixDQUFnQixLQUEvQixFQUFzQyxLQUFLLE1BQUwsQ0FBWSxjQUFaLENBQTJCLENBQTNCLEVBQThCLEtBQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsTUFBOUMsQ0FBdEM7O0FBRUEsZ0JBQUksYUFBYSxLQUFLLE1BQUwsQ0FBWSxjQUFaLENBQTJCLENBQTNCLEVBQThCLEtBQUssWUFBTCxHQUFvQixLQUFLLGlCQUF2RCxJQUE0RSxLQUFLLGlCQUFsRzs7QUFFQSxxQkFBUyxLQUFULEdBQWlCLFVBQWpCO0FBQ0EscUJBQVMsVUFBVCxDQUFvQixHQUFwQixDQUF3QixLQUF4QixFQUErQixDQUFDLFVBQUQsRUFBYSxhQUFhLENBQTFCLENBQS9CLEVBQTZELENBQTdELEVBQWdFLElBQWhFO0FBQ0EscUJBQVMsVUFBVCxDQUFvQixJQUFwQixDQUF5QixLQUF6QjtBQUNBLHFCQUFTLE1BQVQsQ0FBZ0IsS0FBaEIsQ0FBc0IsRUFBdEIsRUFBeUIsRUFBekI7QUFDQSxxQkFBUyxLQUFULENBQWUsQ0FBZixHQUFtQixDQUFDLEdBQXBCO0FBQ0EscUJBQVMsS0FBVCxDQUFlLENBQWYsR0FBbUIsR0FBbkI7O0FBSUEscUJBQVMsSUFBVCxDQUFjLE9BQWQsQ0FBc0IsQ0FBdEIsR0FBMEIsQ0FBMUI7O0FBRUEscUJBQVMsSUFBVCxDQUFjLFFBQWQsQ0FBdUIsQ0FBdkIsR0FBMkIsQ0FBQyxLQUFLLGFBQWpDO0FBQ0EscUJBQVMsSUFBVCxDQUFjLFNBQWQsR0FBMEIsSUFBMUI7O0FBRUE7QUFDQSxxQkFBUyxnQkFBVCxHQUE0QixJQUE1QjtBQUNBLHFCQUFTLGVBQVQsR0FBMkIsSUFBM0I7QUFHSDs7OytCQUVNLEssRUFBTztBQUNWLGdCQUFJLEtBQUosRUFBVztBQUNQLG9CQUFJLE9BQU8sS0FBSyxJQUFoQjtBQUNBLHFCQUFLLFdBQUwsQ0FBaUIsT0FBakIsQ0FBeUIsVUFBUyxNQUFULEVBQWlCO0FBQ3RDLHlCQUFLLEtBQUwsQ0FBVyxJQUFYLENBQWdCLE1BQWhCO0FBQ0gsaUJBRkQ7QUFHSDtBQUNKOzs7Ozs7a0JBSVUsUTs7Ozs7Ozs7Ozs7OztJQ3RFVCxNO0FBQ0Ysb0JBQVksSUFBWixFQUFrQjtBQUFBOztBQUNkLGFBQUssSUFBTCxHQUFZLElBQVo7QUFDQSxhQUFLLFFBQUwsR0FBZ0IsS0FBaEI7QUFDQSxhQUFLLE1BQUwsR0FBYyxJQUFkO0FBQ0g7Ozs7aUNBRVE7QUFDTCxnQkFBSSxlQUFlLElBQUksT0FBTyxRQUFYLENBQW9CLEtBQUssSUFBekIsRUFDZCxTQURjLENBQ0osT0FBTyxLQUFQLENBQWEsUUFBYixDQUFzQixTQUF0QixDQURJLEVBQzhCLENBRDlCLEVBRWQsUUFGYyxDQUVMLENBRkssRUFFRixDQUZFLEVBRUMsR0FGRCxFQUVNLEdBRk4sQ0FBbkI7O0FBSUEsZ0JBQUksZ0JBQWdCLGFBQWEsZUFBYixFQUFwQjs7QUFFQSxpQkFBSyxNQUFMLEdBQWMsS0FBSyxJQUFMLENBQVUsR0FBVixDQUFjLE1BQWQsQ0FBcUIsS0FBSyxJQUFMLENBQVUsS0FBVixDQUFnQixPQUFyQyxFQUE4QyxLQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLE9BQTlELEVBQXVFLFFBQXZFLENBQWQ7QUFDQTs7QUFFQTtBQUNBLGlCQUFLLE1BQUwsQ0FBWSxLQUFaLENBQWtCLEdBQWxCLENBQXNCLEdBQXRCO0FBQ0EsaUJBQUssSUFBTCxDQUFVLE9BQVYsQ0FBa0IsTUFBbEIsQ0FBeUIsTUFBekIsQ0FBZ0MsS0FBSyxNQUFyQztBQUNBLGlCQUFLLE1BQUwsQ0FBWSxVQUFaLEdBQXlCLElBQXpCOztBQUVBLGlCQUFLLE1BQUwsQ0FBWSxVQUFaLENBQXVCLEdBQXZCLENBQTJCLEtBQTNCLEVBQWtDLE9BQU8sU0FBUCxDQUFpQixrQkFBakIsQ0FBb0MsRUFBcEMsRUFBd0MsQ0FBeEMsRUFBMkMsQ0FBM0MsRUFBOEMsTUFBOUMsRUFBc0QsQ0FBdEQsQ0FBbEMsRUFBNEYsQ0FBNUYsRUFBK0YsSUFBL0Y7QUFDQSxpQkFBSyxNQUFMLENBQVksVUFBWixDQUF1QixJQUF2QixDQUE0QixLQUE1Qjs7QUFFQSxpQkFBSyxNQUFMLENBQVksSUFBWixDQUFpQixPQUFqQixDQUF5QixDQUF6QixHQUE2QixHQUE3QjtBQUNBLGlCQUFLLE1BQUwsQ0FBWSxJQUFaLENBQWlCLFFBQWpCLENBQTBCLENBQTFCLEdBQThCLENBQUMsR0FBL0I7QUFDQSxpQkFBSyxNQUFMLENBQVksSUFBWixDQUFpQixXQUFqQixDQUE2QixDQUE3QixHQUFpQyxHQUFqQztBQUNBLGlCQUFLLE1BQUwsQ0FBWSxJQUFaLENBQWlCLGtCQUFqQixHQUFzQyxLQUF0Qzs7QUFFQTtBQUNBLGdCQUFJLGNBQWMsR0FBbEI7QUFDQTs7Ozs7O0FBTUEsaUJBQUssTUFBTCxDQUFZLElBQVosQ0FBaUIsTUFBakIsSUFBMkIsV0FBM0IsQ0EvQkssQ0ErQmtDOztBQUcxQzs7O29DQUVVO0FBQ1AsaUJBQUssUUFBTCxHQUFnQixJQUFoQjtBQUNIOzs7cUNBRVc7QUFDUixpQkFBSyxRQUFMLEdBQWdCLEtBQWhCO0FBQ0g7OzttREFFeUI7QUFDdEIsaUJBQUssTUFBTCxDQUFZLElBQVosQ0FBaUIsUUFBakIsQ0FBMEIsQ0FBMUIsSUFBK0IsRUFBL0I7QUFDSDs7O3dDQUVjOztBQUVYLGdCQUFJLFdBQVcsS0FBSyxNQUFMLENBQVksSUFBWixDQUFpQixRQUFqQixDQUEwQixDQUF6Qzs7QUFFQSxtQkFBTyxXQUFXLEtBQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsTUFBM0IsSUFBcUMsV0FBVyxDQUF2RDtBQUVIOzs7K0JBRU0sSyxFQUFPO0FBQ1YsZ0JBQUksS0FBSixFQUFXO0FBQ1AscUJBQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsSUFBaEIsQ0FBcUIsS0FBSyxNQUExQjtBQUNBLHFCQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLEtBQWhCLENBQXNCLEtBQUssTUFBTCxDQUFZLENBQWxDLEVBQXFDLEtBQUssTUFBTCxDQUFZLENBQWpELEVBQW9ELEtBQXBELEVBQTJELENBQTNEO0FBQ0EscUJBQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsWUFBaEIsQ0FBNkIsS0FBSyxNQUFsQztBQUNIO0FBQ0o7Ozs7OztrQkFHVSxNOzs7Ozs7Ozs7Ozs7Ozs7OztJQ3hFVCxJOzs7Ozs7Ozs7OztrQ0FDUTtBQUNOLGlCQUFLLElBQUwsQ0FBVSxJQUFWLENBQWUsS0FBZixDQUFxQixXQUFyQixFQUFrQyxzQkFBbEMsRUFBMEQsdUJBQTFEO0FBQ0g7OztpQ0FDUztBQUNOLGlCQUFLLEtBQUwsQ0FBVyxTQUFYLEdBQXVCLE9BQU8sWUFBUCxDQUFvQixRQUEzQztBQUNBLGlCQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLEtBQWhCLENBQXNCLFdBQXRCO0FBQ0g7Ozs7RUFQYyxPQUFPLEs7O2tCQVVYLEk7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDVlQsUTs7Ozs7Ozs7Ozs7aUNBQ087QUFDTCxnQkFBSSxRQUFRLEVBQUUsTUFBTSxZQUFSLEVBQXNCLE1BQU0sU0FBNUIsRUFBdUMsT0FBTyxRQUE5QyxFQUFaO0FBQ0EsaUJBQUssU0FBTCxHQUFpQixLQUFLLElBQUwsQ0FBVSxHQUFWLENBQWMsSUFBZCxDQUFtQixLQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLE9BQW5DLEVBQTJDLEdBQTNDLEVBQWdELFlBQWhELEVBQThELEtBQTlELENBQWpCO0FBQ0EsaUJBQUssU0FBTCxDQUFlLE1BQWYsQ0FBc0IsS0FBdEIsQ0FBNEIsR0FBNUIsRUFBaUMsR0FBakM7O0FBRUEsaUJBQUssWUFBTCxHQUFvQixLQUFLLElBQUwsQ0FBVSxHQUFWLENBQWMsSUFBZCxDQUFtQixLQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLE9BQW5DLEVBQTRDLEdBQTVDLEVBQWlELFVBQWpELEVBQTZELEVBQUUsTUFBTSxZQUFSLEVBQXNCLE1BQU0sTUFBNUIsRUFBb0MsT0FBTyxRQUEzQyxFQUE3RCxDQUFwQjtBQUNBLGlCQUFLLFlBQUwsQ0FBa0IsTUFBbEIsQ0FBeUIsS0FBekIsQ0FBK0IsR0FBL0IsRUFBb0MsR0FBcEM7O0FBRUEsaUJBQUssZUFBTCxHQUF1QixLQUFLLElBQUwsQ0FBVSxHQUFWLENBQWMsSUFBZCxDQUFtQixLQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLE9BQW5DLEVBQTRDLEdBQTVDLEVBQWlELHFCQUFqRCxFQUF3RSxFQUFFLE1BQU0sWUFBUixFQUFzQixNQUFNLE1BQTVCLEVBQW9DLE9BQU8sUUFBM0MsRUFBeEUsQ0FBdkI7QUFDQSxpQkFBSyxlQUFMLENBQXFCLE1BQXJCLENBQTRCLEtBQTVCLENBQWtDLEdBQWxDLEVBQXVDLEdBQXZDO0FBQ0g7OztzQ0FFYTtBQUNWLGlCQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLEtBQWhCLENBQXNCLE1BQXRCO0FBQ0g7OztpQ0FFUTtBQUNMLGdCQUFHLEtBQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsYUFBaEIsQ0FBOEIsV0FBOUIsRUFBSCxFQUFnRDtBQUM1QyxxQkFBSyxJQUFMLENBQVUsS0FBVixDQUFnQixLQUFoQixDQUFzQixNQUF0QjtBQUNMO0FBQ0o7Ozs7RUFyQm9CLE9BQU8sSzs7a0JBd0JmLFE7Ozs7Ozs7Ozs7O0FDeEJmOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7Ozs7Ozs7SUFFTSxJOzs7Ozs7Ozs7OztpQ0FDTztBQUFBOztBQUNMLGNBQUUsT0FBRixFQUFXLElBQVg7QUFDQTtBQUNBLGlCQUFLLElBQUwsQ0FBVSxPQUFWLENBQWtCLFdBQWxCLENBQThCLE9BQU8sT0FBUCxDQUFlLE1BQTdDOztBQUVBO0FBQ0EsaUJBQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsZUFBaEIsR0FBa0MsU0FBbEM7O0FBRUEsaUJBQUssVUFBTCxHQUFrQix5QkFBZSxLQUFLLElBQXBCLEVBQTBCLGFBQTFCLENBQWxCO0FBQ0EsaUJBQUssVUFBTCxDQUFnQixNQUFoQjs7QUFFQSxpQkFBSyxNQUFMLEdBQWMscUJBQVcsS0FBSyxJQUFoQixDQUFkO0FBQ0EsaUJBQUssTUFBTCxDQUFZLE1BQVo7O0FBRUEsaUJBQUssU0FBTCxHQUFpQix1QkFBYSxLQUFLLElBQWxCLEVBQXdCLEVBQXhCLEVBQTRCLENBQTVCLENBQWpCOztBQUVBLGlCQUFLLFNBQUwsR0FBaUIsd0JBQWMsS0FBSyxJQUFuQixDQUFqQjtBQUNBLGlCQUFLLFNBQUwsQ0FBZSxNQUFmOztBQUVBLGlCQUFLLFdBQUw7QUFDQSxpQkFBSyxTQUFMOztBQUVBO0FBQ0EsaUJBQUssTUFBTCxHQUFjLElBQWQ7QUFDQSxpQkFBSyxNQUFMLENBQVksRUFBWixDQUFlLGdCQUFmLEVBQWlDLFVBQUMsR0FBRCxFQUFRO0FBQ3JDLG9CQUFHLFFBQVEsR0FBWCxFQUFlO0FBQUMsMkJBQUssTUFBTCxDQUFZLFVBQVo7QUFBeUIsaUJBQXpDLE1BQStDO0FBQzNDLDJCQUFLLE1BQUwsQ0FBWSxTQUFaO0FBQ0g7QUFDSixhQUpEO0FBS0g7OztpQ0FFUTs7QUFFTCxpQkFBSyxJQUFMLENBQVUsT0FBVixDQUFrQixNQUFsQixDQUF5QixPQUF6QixDQUFpQyxLQUFLLE1BQUwsQ0FBWSxNQUE3QyxFQUFxRCxLQUFLLFNBQUwsQ0FBZSxXQUFwRSxFQUFpRixLQUFLLE9BQXRGLEVBQStGLElBQS9GLEVBQXFHLElBQXJHOztBQUVBO0FBQ0EsZ0JBQUcsS0FBSyxNQUFMLENBQVksYUFBWixFQUFILEVBQStCO0FBQzNCLHFCQUFLLE9BQUw7QUFDSDs7QUFFRDtBQUNBLGdCQUFHLEtBQUssTUFBTCxDQUFZLFFBQWYsRUFBd0I7QUFDcEIscUJBQUssTUFBTCxDQUFZLHdCQUFaO0FBQ0g7O0FBRUQsaUJBQUssVUFBTCxDQUFnQixNQUFoQjtBQUNIOzs7c0NBR1k7QUFDVCxpQkFBSyxJQUFMLENBQVUsS0FBVixDQUFnQixNQUFoQixDQUF1QixHQUF2QixDQUEyQixLQUFLLE1BQUwsQ0FBWSxTQUF2QyxFQUFrRCxLQUFLLE1BQXZEO0FBQ0EsaUJBQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsSUFBaEIsQ0FBcUIsR0FBckIsQ0FBeUIsS0FBSyxNQUFMLENBQVksVUFBckMsRUFBaUQsS0FBSyxNQUF0RDtBQUNIOzs7b0NBRVU7QUFDUCxpQkFBSyxJQUFMLENBQVUsSUFBVixDQUFlLE1BQWYsQ0FBc0IsSUFBdEIsQ0FBMkIsSUFBM0IsRUFBaUMsS0FBSyxTQUFMLENBQWUsTUFBaEQsRUFBd0QsS0FBSyxTQUE3RDtBQUNBLGlCQUFLLElBQUwsQ0FBVSxJQUFWLENBQWUsTUFBZixDQUFzQixJQUF0QixDQUEyQixPQUFPLEtBQVAsQ0FBYSxNQUF4QyxFQUFnRCxLQUFLLFNBQUwsQ0FBZSxhQUEvRCxFQUE4RSxLQUFLLFNBQW5GO0FBQ0EsaUJBQUssSUFBTCxDQUFVLElBQVYsQ0FBZSxNQUFmLENBQXNCLElBQXRCLENBQTJCLENBQTNCLEVBQThCLEtBQUssU0FBTCxDQUFlLGNBQTdDLEVBQTZELEtBQUssU0FBbEU7QUFDSDs7O2tDQUVROztBQUVMLGdCQUFJLFdBQVc7QUFDWixzQkFBTSxLQUFLLE1BQUwsRUFETTtBQUVaLHdCQUFRLEVBQUUsT0FBRixFQUFXLEdBQVgsRUFGSTtBQUdaLHlCQUFTLEtBQUssU0FBTCxDQUFlLFFBQWYsRUFIRztBQUlaLHdCQUFTLElBQUksSUFBSixFQUFELENBQVcsT0FBWDtBQUpJLGFBQWY7QUFNQSxjQUFFLElBQUYsQ0FBTztBQUNILHNCQUFNLE1BREg7QUFFSCxxQkFBSyxvRUFGRjtBQUdILHNCQUFNLEtBQUssU0FBTCxDQUFlLFFBQWYsQ0FISDtBQUlILDBCQUFVLE1BSlA7QUFLSCw2QkFBYSxrQkFMVjtBQU1ILDZCQUFhO0FBTlYsYUFBUDs7QUFTQSxvQkFBUSxHQUFSLENBQVksS0FBSyxTQUFMLENBQWUsUUFBZixDQUFaO0FBQ0EsaUJBQUssTUFBTCxDQUFZLElBQVosQ0FBaUIsT0FBakIsRUFBMEIsS0FBSyxTQUFMLENBQWUsUUFBZixDQUExQjtBQUNBLGlCQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLEtBQWhCLENBQXNCLFVBQXRCO0FBQ0g7OztpQ0FFUTtBQUNMLGlCQUFLLE1BQUwsQ0FBWSxNQUFaLENBQW1CLEtBQW5CO0FBQ0EsaUJBQUssU0FBTCxDQUFlLE1BQWYsQ0FBc0IsS0FBdEI7QUFDSDs7O2lDQUVRO0FBQ1AsbUJBQU8sdUNBQXVDLE9BQXZDLENBQStDLE9BQS9DLEVBQXdELFVBQVMsQ0FBVCxFQUFZO0FBQ3pFLG9CQUFJLElBQUksS0FBSyxNQUFMLEtBQWdCLEVBQWhCLEdBQXFCLENBQTdCO0FBQUEsb0JBQWdDLElBQUksS0FBSyxHQUFMLEdBQVcsQ0FBWCxHQUFnQixJQUFJLEdBQUosR0FBVSxHQUE5RDtBQUNBLHVCQUFPLEVBQUUsUUFBRixDQUFXLEVBQVgsQ0FBUDtBQUNELGFBSE0sQ0FBUDtBQUlEOzs7O0VBN0ZjLE9BQU8sSzs7a0JBa0dYLEk7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDdkdULFM7Ozs7Ozs7Ozs7O2tDQUNRO0FBQ047QUFDQTs7QUFFQSxpQkFBSyxJQUFMLENBQVUsY0FBVixDQUF5QixPQUF6QixDQUFpQyxLQUFLLGNBQXRDLEVBQXNELElBQXREO0FBQ0E7O0FBRUEsaUJBQUssSUFBTCxDQUFVLElBQVYsQ0FBZSxLQUFmLENBQXFCLFlBQXJCLEVBQW1DLGdCQUFuQztBQUNBLGlCQUFLLElBQUwsQ0FBVSxJQUFWLENBQWUsS0FBZixDQUFxQixVQUFyQixFQUFpQyxxQkFBakM7QUFDQSxpQkFBSyxJQUFMLENBQVUsSUFBVixDQUFlLEtBQWYsQ0FBcUIsYUFBckIsRUFBb0Msd0JBQXBDO0FBQ0E7QUFDQSxpQkFBSyxJQUFMLENBQVUsSUFBVixDQUFlLEtBQWYsQ0FBcUIsT0FBckIsRUFBOEIsa0JBQTlCLEVBQWtELG1CQUFsRDtBQUNBLGlCQUFLLElBQUwsQ0FBVSxJQUFWLENBQWUsS0FBZixDQUFxQixRQUFyQixFQUErQixtQkFBL0IsRUFBb0Qsb0JBQXBEO0FBQ0g7OztpQ0FFUTtBQUNMO0FBQ0E7QUFDSDs7O2lDQUVRO0FBQ0wsZ0JBQUcsQ0FBQyxDQUFDLEtBQUssS0FBVixFQUFpQjtBQUNiLHFCQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLEtBQWhCLENBQXNCLE9BQXRCO0FBQ0g7QUFDSjs7O3lDQUVnQjtBQUNiLGlCQUFLLEtBQUwsR0FBYSxJQUFiO0FBQ0g7Ozs7RUE3Qm1CLE9BQU8sSzs7a0JBZ0NoQixTOzs7Ozs7Ozs7OztBQ2hDZjs7Ozs7Ozs7Ozs7O0lBRU0sSzs7Ozs7Ozs7Ozs7NkJBQ0s7QUFDUCxXQUFLLFVBQUwsR0FBa0IseUJBQWUsS0FBSyxJQUFwQixFQUEwQixVQUExQixDQUFsQjtBQUNFLFdBQUssVUFBTCxDQUFnQixNQUFoQjs7QUFFRixVQUFJLFFBQVEsRUFBRSxNQUFNLFlBQVIsRUFBc0IsTUFBTSxTQUE1QixFQUF1QyxPQUFPLFFBQTlDLEVBQVo7O0FBRUEsV0FBSyxTQUFMLEdBQWlCLEtBQUssSUFBTCxDQUFVLEdBQVYsQ0FBYyxJQUFkLENBQW1CLEtBQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsT0FBbkMsRUFBNEMsR0FBNUMsRUFBaUQsYUFBakQsRUFBZ0UsS0FBaEUsQ0FBakI7QUFDQSxXQUFLLFNBQUwsQ0FBZSxNQUFmLENBQXNCLEtBQXRCLENBQTRCLEdBQTVCLEVBQWlDLEdBQWpDOztBQUVBLFdBQUssZ0JBQUwsR0FBd0IsS0FBSyxJQUFMLENBQVUsR0FBVixDQUFjLElBQWQsQ0FBbUIsS0FBSyxJQUFMLENBQVUsS0FBVixDQUFnQixPQUFuQyxFQUE0QyxHQUE1QyxFQUFpRCx3QkFBakQsRUFBMkUsRUFBRSxNQUFNLFlBQVIsRUFBc0IsTUFBTSxTQUE1QixFQUF1QyxPQUFPLFFBQTlDLEVBQTNFLENBQXhCO0FBQ0EsV0FBSyxnQkFBTCxDQUFzQixNQUF0QixDQUE2QixLQUE3QixDQUFtQyxHQUFuQyxFQUF3QyxHQUF4Qzs7QUFFQSxRQUFFLE9BQUYsRUFBVyxJQUFYO0FBQ0Q7Ozs2QkFFUTtBQUNQLFVBQUksYUFBYSxFQUFFLE9BQUYsRUFBVyxHQUFYLEVBQWpCO0FBQ0EsVUFBRyxjQUFhLEVBQWIsSUFBbUIsS0FBSyxJQUFMLENBQVUsS0FBVixDQUFnQixhQUFoQixDQUE4QixXQUE5QixFQUF0QixFQUFtRTtBQUNqRSxhQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLEtBQWhCLENBQXNCLE1BQXRCO0FBQ0Q7QUFDRjs7OztFQXJCaUIsT0FBTyxLOztrQkF3QlosSyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjbGFzcyBJbnRlcmZhY2Uge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgICAgIHRoaXMudGltZSA9IDA7XG4gICAgICAgIHRoaXMuc2NvcmVUZXh0ID0gJChcIiNzY29yZVwiKTtcbiAgICAgICAgdGhpcy50aW1lVGV4dCA9ICQoXCIjdGltZVwiKTtcbiAgICB9XG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG5cbiAgICBpbmNyZW1lbnRTY29yZSgpIHtcbiAgICAgICAgdGhpcy5zY29yZVRleHQudGV4dChcIlNjb3JlOiBcIiArIHRoaXMuc2NvcmUrKyk7XG4gICAgfVxuXG4gICAgaW5jcmVtZW50VGltZSgpIHtcbiAgICAgICAgdGhpcy50aW1lVGV4dC50ZXh0KFwiVGltZTogXCIgKyB0aGlzLnRpbWUrKyArIFwic1wiKTtcbiAgICB9XG5cbiAgICBnZXRTY29yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcmU7XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgICAgICB0aGlzLnRpbWUgPSAwO1xuICAgICAgICB0aGlzLnNjb3JlVGV4dC5zaG93KCk7XG4gICAgICAgIHRoaXMudGltZVRleHQuc2hvdygpO1xuICAgICAgICB0aGlzLnNjb3JlVGV4dC50ZXh0KFwiU2NvcmU6IFwiICsgdGhpcy5zY29yZSk7XG4gICAgICAgIHRoaXMudGltZVRleHQudGV4dChcIlRpbWU6IFwiICsgdGhpcy50aW1lICsgXCJzXCIpO1xuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBJbnRlcmZhY2U7IiwiaW1wb3J0IEJvb3QgZnJvbSAnLi9zdGF0ZXMvQm9vdCc7XG5pbXBvcnQgUHJlbG9hZGVyIGZyb20gJy4vc3RhdGVzL1ByZWxvYWRlcic7XG5pbXBvcnQgVGl0bGUgZnJvbSAnLi9zdGF0ZXMvVGl0bGUnO1xuaW1wb3J0IE1haW4gZnJvbSAnLi9zdGF0ZXMvTWFpbic7XG5pbXBvcnQgR2FtZU92ZXIgZnJvbSAnLi9zdGF0ZXMvR2FtZU92ZXInO1xuXG5jbGFzcyBHYW1lIGV4dGVuZHMgUGhhc2VyLkdhbWUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih3aW5kb3cuaW5uZXJXaWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCB3aW5kb3cuaW5uZXJIZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgUGhhc2VyLkFVVE8pO1xuICAgIHRoaXMuc3RhdGUuYWRkKCdCb290JywgQm9vdCwgZmFsc2UpO1xuICAgIHRoaXMuc3RhdGUuYWRkKCdQcmVsb2FkZXInLCBQcmVsb2FkZXIsIGZhbHNlKTtcbiAgICB0aGlzLnN0YXRlLmFkZCgnVGl0bGUnLCBUaXRsZSwgZmFsc2UpO1xuICAgIHRoaXMuc3RhdGUuYWRkKCdNYWluJywgTWFpbiwgZmFsc2UpO1xuICAgIHRoaXMuc3RhdGUuYWRkKCdHYW1lT3ZlcicsIEdhbWVPdmVyLCBmYWxzZSk7XG5cbiAgICB0aGlzLnN0YXRlLnN0YXJ0KCdCb290Jyk7XG4gIH1cbn1cblxubmV3IEdhbWUoKTsiLCJjbGFzcyBCYWNrZ3JvdW5kIHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lLCB0ZXh0dXJlKSB7XG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IG51bGw7XG4gICAgfVxuXG4gICAgY3JlYXRlKCkge1xuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSB0aGlzLmdhbWUuYWRkLnRpbGVTcHJpdGUoMCwgMCxcbiAgICAgICAgICAgIHRoaXMuZ2FtZS53aWR0aCxcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5oZWlnaHQsXG4gICAgICAgICAgICB0aGlzLnRleHR1cmUpO1xuICAgICAgICB0aGlzLmJhY2tncm91bmQudGlsZVNjYWxlLnNldFRvKHRoaXMuYmFja2dyb3VuZC5oZWlnaHQgLyB0aGlzLmJhY2tncm91bmQudGV4dHVyZS5oZWlnaHQpO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLnRpbGVQb3NpdGlvbi54IC09IDI7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYWNrZ3JvdW5kOyIsImNsYXNzIE9ic3RhY2xlIHtcblxuICAgIGNvbnN0cnVjdG9yKGdhbWUsIG51bU9ic3RhY2xlcywgZnJhbWVzUGVyT2JzdGFjbGUpe1xuXG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgICAgIHRoaXMub2JzdGFjbGVHcm91cCA9IG51bGw7XG4gICAgICAgIHRoaXMuc3ByaXRlR3JvdXAgPSBudWxsO1xuICAgICAgICB0aGlzLm9ic3RhY2xlU3BlZWQgPSAzMDA7XG4gICAgICAgIHRoaXMubnVtT2JzdGFjbGVzID0gbnVtT2JzdGFjbGVzO1xuICAgICAgICB0aGlzLmZyYW1lc1Blck9ic3RhY2xlID0gZnJhbWVzUGVyT2JzdGFjbGU7XG5cbiAgICAgICAgbGV0IHNlZWQgPSBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLnJhbmRvbSA9IG5ldyBQaGFzZXIuUmFuZG9tRGF0YUdlbmVyYXRvcihbc2VlZF0pO1xuXG4gICAgICAgIHRoaXMuaW5pdE9ic3RhY2xlcygpO1xuICAgIH1cblxuICAgIGluaXRPYnN0YWNsZXMoKXtcblxuICAgICAgICB0aGlzLm9ic3RhY2xlTWluU2l6ZSA9IDUwO1xuICAgICAgICB0aGlzLm9ic3RhY2xlTWF4U2l6ZSA9IDIwMDtcblxuICAgICAgICB0aGlzLnNwcml0ZUdyb3VwID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xuICAgICAgICB0aGlzLnNwcml0ZUdyb3VwLmVuYWJsZUJvZHkgPSB0cnVlO1xuICAgICAgICB0aGlzLnNwcml0ZUdyb3VwLmNyZWF0ZU11bHRpcGxlKDEwLCAnYmlyZHMnKTtcblxuICAgIH1cblxuICAgIGNyZWF0ZSgpe1xuICAgICAgICBsZXQgb2JzdGFjbGUgPSB0aGlzLnNwcml0ZUdyb3VwLmdldEZpcnN0RGVhZCh0cnVlKTtcblxuXG4gICAgICAgIC8vdGhpcy5zcHJpdGVHcm91cC5yZXNldENoaWxkKG9ic3RhY2xlLCB0aGlzLmdhbWUud29ybGQud2lkdGgsIHRoaXMucmFuZG9tLmludGVnZXJJblJhbmdlKDAsIHRoaXMuZ2FtZS53b3JsZC5oZWlnaHQgLSBvYnN0YWNsZVNpemUpLCBvYnN0YWNsZVNwcml0ZVRleHR1cmUpO1xuXG4gICAgICAgIG9ic3RhY2xlLnJlc2V0KHRoaXMuZ2FtZS53b3JsZC53aWR0aCwgdGhpcy5yYW5kb20uaW50ZWdlckluUmFuZ2UoMCwgdGhpcy5nYW1lLndvcmxkLmhlaWdodCkpO1xuXG4gICAgICAgIGxldCByYW5kb21CaXJkID0gdGhpcy5yYW5kb20uaW50ZWdlckluUmFuZ2UoMCwgdGhpcy5udW1PYnN0YWNsZXMgLyB0aGlzLmZyYW1lc1Blck9ic3RhY2xlKSAqIHRoaXMuZnJhbWVzUGVyT2JzdGFjbGU7XG5cbiAgICAgICAgb2JzdGFjbGUuZnJhbWUgPSByYW5kb21CaXJkO1xuICAgICAgICBvYnN0YWNsZS5hbmltYXRpb25zLmFkZCgnZmx5JywgW3JhbmRvbUJpcmQsIHJhbmRvbUJpcmQgKyAxXSwgNSwgdHJ1ZSk7XG4gICAgICAgIG9ic3RhY2xlLmFuaW1hdGlvbnMucGxheSgnZmx5Jyk7XG4gICAgICAgIG9ic3RhY2xlLmFuY2hvci5zZXRUbyguNSwuNSk7XG4gICAgICAgIG9ic3RhY2xlLnNjYWxlLnggPSAtMC41O1xuICAgICAgICBvYnN0YWNsZS5zY2FsZS55ID0gMC41XG5cblxuXG4gICAgICAgIG9ic3RhY2xlLmJvZHkuZ3Jhdml0eS55ID0gMDtcblxuICAgICAgICBvYnN0YWNsZS5ib2R5LnZlbG9jaXR5LnggPSAtdGhpcy5vYnN0YWNsZVNwZWVkO1xuICAgICAgICBvYnN0YWNsZS5ib2R5LmltbW92YWJsZSA9IHRydWU7XG5cbiAgICAgICAgLy9XaGVuIHRoZSBibG9jayBsZWF2ZXMgdGhlIHNjcmVlbiwga2lsbCBpdFxuICAgICAgICBvYnN0YWNsZS5jaGVja1dvcmxkQm91bmRzID0gdHJ1ZTtcbiAgICAgICAgb2JzdGFjbGUub3V0T2ZCb3VuZHNLaWxsID0gdHJ1ZTtcblxuXG4gICAgfVxuXG4gICAgcmVuZGVyKGRlYnVnKSB7XG4gICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICAgbGV0IGdhbWUgPSB0aGlzLmdhbWU7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZUdyb3VwLmZvckVhY2goZnVuY3Rpb24oc3ByaXRlKSB7XG4gICAgICAgICAgICAgICAgZ2FtZS5kZWJ1Zy5ib2R5KHNwcml0ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBPYnN0YWNsZTsiLCJjbGFzcyBQbGF5ZXIge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5pc1Jpc2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNwcml0ZSA9IG51bGw7XG4gICAgfVxuXG4gICAgY3JlYXRlKCkge1xuICAgICAgICBsZXQgcGxheWVyU3ByaXRlID0gbmV3IFBoYXNlci5HcmFwaGljcyh0aGlzLmdhbWUpXG4gICAgICAgICAgICAuYmVnaW5GaWxsKFBoYXNlci5Db2xvci5oZXhUb1JHQignIzJjM2U1MCcpLCAxKVxuICAgICAgICAgICAgLmRyYXdSZWN0KDAsIDAsIDEwMCwgMTAwKTtcblxuICAgICAgICBsZXQgc3ByaXRlVGV4dHVyZSA9IHBsYXllclNwcml0ZS5nZW5lcmF0ZVRleHR1cmUoKTtcblxuICAgICAgICB0aGlzLnNwcml0ZSA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLCB0aGlzLmdhbWUud29ybGQuY2VudGVyWSwgJ3BsYXllcicpO1xuICAgICAgICAvL3RoaXMuc3ByaXRlID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5nYW1lLndvcmxkLmNlbnRlclgsIHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJZLCBzcHJpdGVUZXh0dXJlKTtcblxuICAgICAgICAvL3RoaXMuc3ByaXRlLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgIHRoaXMuc3ByaXRlLnNjYWxlLnNldCgwLjUpO1xuICAgICAgICB0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMuc3ByaXRlKTtcbiAgICAgICAgdGhpcy5zcHJpdGUuZW5hYmxlQm9keSA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5zcHJpdGUuYW5pbWF0aW9ucy5hZGQoJ2ZseScsIFBoYXNlci5BbmltYXRpb24uZ2VuZXJhdGVGcmFtZU5hbWVzKCcnLCAxLCAyLCAnLnBuZycsIDQpLCA1LCB0cnVlKTtcbiAgICAgICAgdGhpcy5zcHJpdGUuYW5pbWF0aW9ucy5wbGF5KCdmbHknKTtcblxuICAgICAgICB0aGlzLnNwcml0ZS5ib2R5LmdyYXZpdHkueSA9IDUwMDtcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS52ZWxvY2l0eS55ID0gLTIwMDtcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5tYXhWZWxvY2l0eS55ID0gMjAwO1xuICAgICAgICB0aGlzLnNwcml0ZS5ib2R5LmNvbGxpZGVXb3JsZEJvdW5kcyA9IGZhbHNlO1xuXG4gICAgICAgIC8vY2FsY3VsYXRlIGNlbnRyZSBmb3IgYm91bmRpbmcgYm94XG4gICAgICAgIGxldCBzY2FsZUZhY3RvciA9IDAuOTtcbiAgICAgICAgLypcbiAgICAgICAgbGV0IG5ld1dpZHRoID0gdGhpcy5zcHJpdGUud2lkdGggKiBzY2FsZUZhY3RvcjtcbiAgICAgICAgbGV0IG5ld0hlaWdodCA9IHRoaXMuc3ByaXRlLmhlaWdodCAqIHNjYWxlRmFjdG9yXG4gICAgICAgIGxldCBjZW50cmVYID0gKHRoaXMuc3ByaXRlLndpZHRoIC0gKG5ld1dpZHRoKSkgLzI7XG4gICAgICAgIGxldCBjZW50cmVZID0gKHRoaXMuc3ByaXRlLmhlaWdodCAtIChuZXdIZWlnaHQpKSAvMjtcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS53aWR0aCAqPSBzY2FsZUZhY3RvcjsqL1xuICAgICAgICB0aGlzLnNwcml0ZS5ib2R5LmhlaWdodCAqPSBzY2FsZUZhY3RvcjsvKlxuICAgICAgICB0aGlzLnNwcml0ZS5ib2R5LnNldFNpemUobmV3V2lkdGgsIG5ld0hlaWdodCwgY2VudHJlWCwgY2VudHJlWSk7Ki9cblxuICAgIH1cblxuICAgIHNldFJpc2luZygpe1xuICAgICAgICB0aGlzLmlzUmlzaW5nID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzZXRGYWxsaW5nKCl7XG4gICAgICAgIHRoaXMuaXNSaXNpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpbmNyZWFzZVZlcnRpY2FsVmVsb2NpdHkoKXtcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS52ZWxvY2l0eS55IC09IDMwO1xuICAgIH1cblxuICAgIGlzT3V0T2ZCb3VuZHMoKXtcblxuICAgICAgICBsZXQgcG9zaXRpb24gPSB0aGlzLnNwcml0ZS5ib2R5LnBvc2l0aW9uLnk7XG5cbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uID4gdGhpcy5nYW1lLndvcmxkLmhlaWdodCB8fCBwb3NpdGlvbiA8IDA7XG5cbiAgICB9XG5cbiAgICByZW5kZXIoZGVidWcpIHtcbiAgICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUuZGVidWcuYm9keSh0aGlzLnNwcml0ZSk7XG4gICAgICAgICAgICB0aGlzLmdhbWUuZGVidWcucGl4ZWwodGhpcy5zcHJpdGUueCwgdGhpcy5zcHJpdGUueSwgJ3JlZCcsIDQpO1xuICAgICAgICAgICAgdGhpcy5nYW1lLmRlYnVnLnNwcml0ZUJvdW5kcyh0aGlzLnNwcml0ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBsYXllcjsiLCJjbGFzcyBCb290IGV4dGVuZHMgUGhhc2VyLlN0YXRlIHtcbiAgICBwcmVsb2FkKCkge1xuICAgICAgICB0aGlzLmdhbWUubG9hZC5hdGxhcygncHJlbG9hZGVyJywgJ2ltYWdlcy9wcmVsb2FkZXIucG5nJywgJ2ltYWdlcy9wcmVsb2FkZXIuanNvbicpO1xuICAgIH1cbiAgICBjcmVhdGUgKCkge1xuICAgICAgICB0aGlzLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XG4gICAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnUHJlbG9hZGVyJyk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCb290OyIsImNsYXNzIEdhbWVPdmVyIGV4dGVuZHMgUGhhc2VyLlN0YXRlIHtcbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IHsgZm9udDogJzY1cHggQXJpYWwnLCBmaWxsOiAnIzAwMDAwMCcsIGFsaWduOiAnY2VudGVyJ307XG4gICAgICAgIHRoaXMudGl0bGVUZXh0ID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLDEwMCwgJ0dhbWUgT3ZlciEnLCBzdHlsZSk7XG4gICAgICAgIHRoaXMudGl0bGVUZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgICAgICAgdGhpcy5jb25ncmF0c1RleHQgPSB0aGlzLmdhbWUuYWRkLnRleHQodGhpcy5nYW1lLndvcmxkLmNlbnRlclgsIDIwMCwgJ1lvdSBXaW4hJywgeyBmb250OiAnMzJweCBBcmlhbCcsIGZpbGw6ICcjMDAwJywgYWxpZ246ICdjZW50ZXInfSk7XG4gICAgICAgIHRoaXMuY29uZ3JhdHNUZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvblRleHQgPSB0aGlzLmdhbWUuYWRkLnRleHQodGhpcy5nYW1lLndvcmxkLmNlbnRlclgsIDMwMCwgJ0NsaWNrIFRvIFBsYXkgQWdhaW4nLCB7IGZvbnQ6ICcxNnB4IEFyaWFsJywgZmlsbDogJyMwMDAnLCBhbGlnbjogJ2NlbnRlcid9KTtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvblRleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICB9XG5cbiAgICByZXN0YXJ0R2FtZSgpIHtcbiAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KFwiTWFpblwiKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmKHRoaXMuZ2FtZS5pbnB1dC5hY3RpdmVQb2ludGVyLmp1c3RQcmVzc2VkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnTWFpbicpO1xuICAgICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWVPdmVyO1xuIiwiaW1wb3J0IFBsYXllciBmcm9tICcuLi9vYmplY3RzL1BsYXllcic7XG5pbXBvcnQgT2JzdGFjbGUgZnJvbSAnLi4vb2JqZWN0cy9PYnN0YWNsZSc7XG5pbXBvcnQgSW50ZXJmYWNlIGZyb20gJy4uL2NvbnRyb2xsZXJzL0ludGVyZmFjZSc7XG5pbXBvcnQgQmFja2dyb3VuZCBmcm9tICcuLi9vYmplY3RzL0JhY2tncm91bmQnO1xuXG5jbGFzcyBNYWluIGV4dGVuZHMgUGhhc2VyLlN0YXRlIHtcbiAgICBjcmVhdGUoKSB7XG4gICAgICAgICQoJyNuYW1lJykuaGlkZSgpO1xuICAgICAgICAvL0VuYWJsZSBBcmNhZGUgUGh5c2ljc1xuICAgICAgICB0aGlzLmdhbWUucGh5c2ljcy5zdGFydFN5c3RlbShQaGFzZXIuUGh5c2ljcy5BUkNBREUpO1xuXG4gICAgICAgIC8vU2V0IHRoZSBnYW1lcyBiYWNrZ3JvdW5kIGNvbG91clxuICAgICAgICB0aGlzLmdhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gJyNjZWNlY2UnO1xuXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBCYWNrZ3JvdW5kKHRoaXMuZ2FtZSwgJ21vdW50YWluX2JnJyk7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC5jcmVhdGUoKTtcblxuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIodGhpcy5nYW1lKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIuY3JlYXRlKCk7XG5cbiAgICAgICAgdGhpcy5vYnN0YWNsZXMgPSBuZXcgT2JzdGFjbGUodGhpcy5nYW1lLCAxMCwgMik7XG5cbiAgICAgICAgdGhpcy5pbnRlcmZhY2UgPSBuZXcgSW50ZXJmYWNlKHRoaXMuZ2FtZSk7XG4gICAgICAgIHRoaXMuaW50ZXJmYWNlLmNyZWF0ZSgpO1xuXG4gICAgICAgIHRoaXMuYWRkQ29udHJvbHMoKTtcbiAgICAgICAgdGhpcy5hZGRUaW1lcnMoKTtcblxuICAgICAgICAvLyBzb2NrZXQuaW9cbiAgICAgICAgdGhpcy5zb2NrZXQgPSBpbygpO1xuICAgICAgICB0aGlzLnNvY2tldC5vbignY29udHJvbC1jaGFuZ2UnLCAobXNnKT0+IHtcbiAgICAgICAgICAgIGlmKG1zZyA9PT0gJzAnKXt0aGlzLnBsYXllci5zZXRGYWxsaW5nKCl9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnNldFJpc2luZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gXG4gICAgdXBkYXRlKCkge1xuXG4gICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS5vdmVybGFwKHRoaXMucGxheWVyLnNwcml0ZSwgdGhpcy5vYnN0YWNsZXMuc3ByaXRlR3JvdXAsIHRoaXMuZW5kR2FtZSwgbnVsbCwgdGhpcyk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgb3V0IG9mIGJvdW5kc1xuICAgICAgICBpZih0aGlzLnBsYXllci5pc091dE9mQm91bmRzKCkpe1xuICAgICAgICAgICAgdGhpcy5lbmRHYW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiAgaGVsaWNvcHRlciBpcyByaXNpbmdcbiAgICAgICAgaWYodGhpcy5wbGF5ZXIuaXNSaXNpbmcpe1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXIuaW5jcmVhc2VWZXJ0aWNhbFZlbG9jaXR5KCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJhY2tncm91bmQudXBkYXRlKCk7XG4gICAgfVxuXG5cbiAgICBhZGRDb250cm9scygpe1xuICAgICAgICB0aGlzLmdhbWUuaW5wdXQub25Eb3duLmFkZCh0aGlzLnBsYXllci5zZXRSaXNpbmcsIHRoaXMucGxheWVyKTtcbiAgICAgICAgdGhpcy5nYW1lLmlucHV0Lm9uVXAuYWRkKHRoaXMucGxheWVyLnNldEZhbGxpbmcsIHRoaXMucGxheWVyKTtcbiAgICB9XG5cbiAgICBhZGRUaW1lcnMoKXtcbiAgICAgICAgdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmxvb3AoNTAwMCwgdGhpcy5vYnN0YWNsZXMuY3JlYXRlLCB0aGlzLm9ic3RhY2xlcyk7XG4gICAgICAgIHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5sb29wKFBoYXNlci5UaW1lci5TRUNPTkQsIHRoaXMuaW50ZXJmYWNlLmluY3JlbWVudFRpbWUsIHRoaXMuaW50ZXJmYWNlKTtcbiAgICAgICAgdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmxvb3AoMSwgdGhpcy5pbnRlcmZhY2UuaW5jcmVtZW50U2NvcmUsIHRoaXMuaW50ZXJmYWNlKTtcbiAgICB9XG5cbiAgICBlbmRHYW1lKCl7XG5cbiAgICAgICAgdmFyIHBvc3REYXRhID0ge1xuICAgICAgICAgICBcImlkXCI6IHRoaXMudXVpZHY0KCksXG4gICAgICAgICAgIFwibmFtZVwiOiAkKCcjbmFtZScpLnZhbCgpLFxuICAgICAgICAgICBcInNjb3JlXCI6IHRoaXMuaW50ZXJmYWNlLmdldFNjb3JlKCksXG4gICAgICAgICAgIFwidGltZVwiOiAobmV3IERhdGUpLmdldFRpbWUoKVxuICAgICAgICB9XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL3FuOTA3Zjl2d2UuZXhlY3V0ZS1hcGkuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb20vcHJvZC9zY29yZXMnLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdKU09OJyxcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIGNyb3NzRG9tYWluOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHBvc3REYXRhKSk7XG4gICAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ3Njb3JlJywgSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpKTtcbiAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdHYW1lT3ZlcicpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXIucmVuZGVyKGZhbHNlKTtcbiAgICAgICAgdGhpcy5vYnN0YWNsZXMucmVuZGVyKGZhbHNlKTtcbiAgICB9XG5cbiAgICB1dWlkdjQoKSB7XG4gICAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbihjKSB7XG4gICAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMCwgdiA9IGMgPT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KTtcbiAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICAgICAgfSk7XG4gICAgfVxufVxuXG5cblxuZXhwb3J0IGRlZmF1bHQgTWFpbjsiLCJjbGFzcyBQcmVsb2FkZXIgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuICAgIHByZWxvYWQoKSB7XG4gICAgICAgIC8vdGhpcy5hc3NldCA9IHRoaXMuYWRkLnNwcml0ZSh0aGlzLmdhbWUud29ybGQuY2VudGVyWCwgdGhpcy5nYW1lLndvcmxkLmNlbnRlclksICdwcmVsb2FkZXInKTtcbiAgICAgICAgLy90aGlzLmFzc2V0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgICAgICAgdGhpcy5sb2FkLm9uTG9hZENvbXBsZXRlLmFkZE9uY2UodGhpcy5vbkxvYWRDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgIC8vdGhpcy5sb2FkLnNldFByZWxvYWRTcHJpdGUodGhpcy5hc3NldCk7XG5cbiAgICAgICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ2JhY2tncm91bmQnLCAnaW1hZ2VzL3NreS5wbmcnKTtcbiAgICAgICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ2dyYXNzX2JnJywgJ2ltYWdlcy9ncmFzc19iZy5wbmcnKTtcbiAgICAgICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ21vdW50YWluX2JnJywgJ2ltYWdlcy9tb3VudGFpbl9iZy5wbmcnKTtcbiAgICAgICAgLy90aGlzLmdhbWUubG9hZC5pbWFnZSgnYmFsbG9vbl8xJywgJ2ltYWdlcy9iYWxsb29uXzEucG5nJyk7XG4gICAgICAgIHRoaXMuZ2FtZS5sb2FkLmF0bGFzKCdiaXJkcycsICdpbWFnZXMvYmlyZHMucG5nJywgJ2ltYWdlcy9iaXJkcy5qc29uJyk7XG4gICAgICAgIHRoaXMuZ2FtZS5sb2FkLmF0bGFzKCdwbGF5ZXInLCAnaW1hZ2VzL3BsYXllci5wbmcnLCAnaW1hZ2VzL3BsYXllci5qc29uJyk7XG4gICAgfVxuXG4gICAgY3JlYXRlKCkge1xuICAgICAgICAvL3RoaXMuYXNzZXQuY3JvcEVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLy90aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ01haW4nKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmKCEhdGhpcy5yZWFkeSkge1xuICAgICAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdUaXRsZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Mb2FkQ29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMucmVhZHkgPSB0cnVlO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUHJlbG9hZGVyOyIsImltcG9ydCBCYWNrZ3JvdW5kIGZyb20gJy4uL29iamVjdHMvQmFja2dyb3VuZCc7XG5cbmNsYXNzIFRpdGxlIGV4dGVuZHMgUGhhc2VyLlN0YXRlIHtcbiAgY3JlYXRlKCkge1xuICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBCYWNrZ3JvdW5kKHRoaXMuZ2FtZSwgJ2dyYXNzX2JnJyk7XG4gICAgICB0aGlzLmJhY2tncm91bmQuY3JlYXRlKCk7XG5cbiAgICB2YXIgc3R5bGUgPSB7IGZvbnQ6ICc2NXB4IEFyaWFsJywgZmlsbDogJyMwMDAwMDAnLCBhbGlnbjogJ2NlbnRlcid9O1xuXG4gICAgdGhpcy50aXRsZVRleHQgPSB0aGlzLmdhbWUuYWRkLnRleHQodGhpcy5nYW1lLndvcmxkLmNlbnRlclgsIDMwMCwgJ1NvbmljIEJPT00hJywgc3R5bGUpO1xuICAgIHRoaXMudGl0bGVUZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgICB0aGlzLmluc3RydWN0aW9uc1RleHQgPSB0aGlzLmdhbWUuYWRkLnRleHQodGhpcy5nYW1lLndvcmxkLmNlbnRlclgsIDQwMCwgJ0NsaWNrIGFueXdoZXJlIHRvIHBsYXknLCB7IGZvbnQ6ICcxNnB4IEFyaWFsJywgZmlsbDogJyMwMDAwMDAnLCBhbGlnbjogJ2NlbnRlcid9KTtcbiAgICB0aGlzLmluc3RydWN0aW9uc1RleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICAgICQoJyNuYW1lJykuc2hvdygpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIHZhciBwbGF5ZXJOYW1lID0gJChcIiNuYW1lXCIpLnZhbCgpO1xuICAgIGlmKHBsYXllck5hbWUhPSBcIlwiICYmIHRoaXMuZ2FtZS5pbnB1dC5hY3RpdmVQb2ludGVyLmp1c3RQcmVzc2VkKCkpIHtcbiAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnTWFpbicpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaXRsZTsiXX0=
