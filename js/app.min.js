(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Interface = function () {
    function Interface(game) {
        _classCallCheck(this, Interface);

        this.game = game;
        this.score = 0;
        this.time = 0;
        this.scoreText = $("#score");
        this.timeText = $("#time");
    }

    _createClass(Interface, [{
        key: "create",
        value: function create() {
            this.reset();
        }
    }, {
        key: "incrementScore",
        value: function incrementScore() {
            this.scoreText.text("Score: " + this.score++);
        }
    }, {
        key: "incrementTime",
        value: function incrementTime() {
            this.timeText.text("Time: " + this.time++ + "s");
        }
    }, {
        key: "getScore",
        value: function getScore() {
            return this.score;
        }
    }, {
        key: "reset",
        value: function reset() {
            this.score = 0;
            this.time = 0;
            this.scoreText.show();
            this.timeText.show();
            this.scoreText.text("Score: " + this.score);
            this.timeText.text("Time: " + this.time + "s");
        }
    }]);

    return Interface;
}();

exports.default = Interface;

},{}],2:[function(require,module,exports){
'use strict';

var _Boot = require('./states/Boot');

var _Boot2 = _interopRequireDefault(_Boot);

var _Preloader = require('./states/Preloader');

var _Preloader2 = _interopRequireDefault(_Preloader);

var _Title = require('./states/Title');

var _Title2 = _interopRequireDefault(_Title);

var _Main = require('./states/Main');

var _Main2 = _interopRequireDefault(_Main);

var _GameOver = require('./states/GameOver');

var _GameOver2 = _interopRequireDefault(_GameOver);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Game = function (_Phaser$Game) {
  _inherits(Game, _Phaser$Game);

  function Game() {
    _classCallCheck(this, Game);

    var _this = _possibleConstructorReturn(this, (Game.__proto__ || Object.getPrototypeOf(Game)).call(this, window.innerWidth * window.devicePixelRatio, window.innerHeight * window.devicePixelRatio, Phaser.AUTO));

    _this.state.add('Boot', _Boot2.default, false);
    _this.state.add('Preloader', _Preloader2.default, false);
    _this.state.add('Title', _Title2.default, false);
    _this.state.add('Main', _Main2.default, false);
    _this.state.add('GameOver', _GameOver2.default, false);

    _this.state.start('Boot');
    return _this;
  }

  return Game;
}(Phaser.Game);

new Game();

},{"./states/Boot":6,"./states/GameOver":7,"./states/Main":8,"./states/Preloader":9,"./states/Title":10}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Background = function () {
    function Background(game, texture) {
        _classCallCheck(this, Background);

        this.game = game;
        this.texture = texture;
        this.background = null;
    }

    _createClass(Background, [{
        key: "create",
        value: function create() {
            this.background = this.game.add.tileSprite(0, 0, this.game.width, this.game.height, this.texture);
            this.background.tileScale.setTo(this.background.height / this.background.texture.height);
        }
    }, {
        key: "update",
        value: function update() {
            this.background.tilePosition.x -= 2;
        }
    }]);

    return Background;
}();

exports.default = Background;

},{}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Obstacle = function () {
    function Obstacle(game, numObstacles, framesPerObstacle) {
        _classCallCheck(this, Obstacle);

        this.game = game;
        this.obstacleGroup = null;
        this.spriteGroup = null;
        this.obstacleSpeed = 300;
        this.numObstacles = numObstacles;
        this.framesPerObstacle = framesPerObstacle;

        var seed = Date.now();
        this.random = new Phaser.RandomDataGenerator([seed]);

        this.initObstacles();
    }

    _createClass(Obstacle, [{
        key: 'initObstacles',
        value: function initObstacles() {

            this.obstacleMinSize = 50;
            this.obstacleMaxSize = 200;

            this.spriteGroup = this.game.add.group();
            this.spriteGroup.enableBody = true;
            this.spriteGroup.createMultiple(10, 'birds');
        }
    }, {
        key: 'create',
        value: function create() {
            var obstacle = this.spriteGroup.getFirstDead(true);

            //this.spriteGroup.resetChild(obstacle, this.game.world.width, this.random.integerInRange(0, this.game.world.height - obstacleSize), obstacleSpriteTexture);

            obstacle.reset(this.game.world.width, this.random.integerInRange(0, this.game.world.height));

            var randomBird = this.random.integerInRange(0, this.numObstacles / this.framesPerObstacle) * this.framesPerObstacle;

            obstacle.frame = randomBird;
            obstacle.animations.add('fly', [randomBird, randomBird + 1], 5, true);
            obstacle.animations.play('fly');
            obstacle.anchor.setTo(.5, .5);
            obstacle.scale.x = -0.5;
            obstacle.scale.y = 0.5;

            obstacle.body.gravity.y = 0;

            obstacle.body.velocity.x = -this.obstacleSpeed;
            obstacle.body.immovable = true;

            //When the block leaves the screen, kill it
            obstacle.checkWorldBounds = true;
            obstacle.outOfBoundsKill = true;
        }
    }, {
        key: 'render',
        value: function render(debug) {
            if (debug) {
                var game = this.game;
                this.spriteGroup.forEach(function (sprite) {
                    game.debug.body(sprite);
                });
            }
        }
    }]);

    return Obstacle;
}();

exports.default = Obstacle;

},{}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Player = function () {
    function Player(game) {
        _classCallCheck(this, Player);

        this.game = game;
        this.isRising = false;
        this.sprite = null;
    }

    _createClass(Player, [{
        key: 'create',
        value: function create() {
            var playerSprite = new Phaser.Graphics(this.game).beginFill(Phaser.Color.hexToRGB('#2c3e50'), 1).drawRect(0, 0, 100, 100);

            var spriteTexture = playerSprite.generateTexture();

            this.sprite = this.game.add.sprite(this.game.world.centerX, this.game.world.centerY, 'player');
            //this.sprite = this.game.add.sprite(this.game.world.centerX, this.game.world.centerY, spriteTexture);

            //this.sprite.anchor.setTo(0.5, 0.5);
            this.sprite.scale.set(0.5);
            this.game.physics.arcade.enable(this.sprite);
            this.sprite.enableBody = true;

            this.sprite.animations.add('fly', Phaser.Animation.generateFrameNames('', 1, 2, '.png', 4), 5, true);
            this.sprite.animations.play('fly');

            this.sprite.body.gravity.y = 500;
            this.sprite.body.velocity.y = -200;
            this.sprite.body.maxVelocity.y = 200;
            this.sprite.body.collideWorldBounds = false;

            //calculate centre for bounding box
            var scaleFactor = 0.9;
            /*
            let newWidth = this.sprite.width * scaleFactor;
            let newHeight = this.sprite.height * scaleFactor
            let centreX = (this.sprite.width - (newWidth)) /2;
            let centreY = (this.sprite.height - (newHeight)) /2;
            this.sprite.body.width *= scaleFactor;*/
            this.sprite.body.height *= scaleFactor; /*
                                                    this.sprite.body.setSize(newWidth, newHeight, centreX, centreY);*/
        }
    }, {
        key: 'setRising',
        value: function setRising() {
            this.isRising = true;
        }
    }, {
        key: 'setFalling',
        value: function setFalling() {
            this.isRising = false;
        }
    }, {
        key: 'increaseVerticalVelocity',
        value: function increaseVerticalVelocity() {
            this.sprite.body.velocity.y -= 30;
        }
    }, {
        key: 'isOutOfBounds',
        value: function isOutOfBounds() {

            var position = this.sprite.body.position.y;

            return position > this.game.world.height || position < 0;
        }
    }, {
        key: 'render',
        value: function render(debug) {
            if (debug) {
                this.game.debug.body(this.sprite);
                this.game.debug.pixel(this.sprite.x, this.sprite.y, 'red', 4);
                this.game.debug.spriteBounds(this.sprite);
            }
        }
    }]);

    return Player;
}();

exports.default = Player;

},{}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Boot = function (_Phaser$State) {
    _inherits(Boot, _Phaser$State);

    function Boot() {
        _classCallCheck(this, Boot);

        return _possibleConstructorReturn(this, (Boot.__proto__ || Object.getPrototypeOf(Boot)).apply(this, arguments));
    }

    _createClass(Boot, [{
        key: 'preload',
        value: function preload() {
            this.game.load.atlas('preloader', 'images/preloader.png', 'images/preloader.json');
        }
    }, {
        key: 'create',
        value: function create() {
            this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
            this.game.state.start('Preloader');
        }
    }]);

    return Boot;
}(Phaser.State);

exports.default = Boot;

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GameOver = function (_Phaser$State) {
    _inherits(GameOver, _Phaser$State);

    function GameOver() {
        _classCallCheck(this, GameOver);

        return _possibleConstructorReturn(this, (GameOver.__proto__ || Object.getPrototypeOf(GameOver)).apply(this, arguments));
    }

    _createClass(GameOver, [{
        key: 'create',
        value: function create() {
            var style = { font: '65px Arial', fill: '#000000', align: 'center' };
            this.titleText = this.game.add.text(this.game.world.centerX, 100, 'Game Over!', style);
            this.titleText.anchor.setTo(0.5, 0.5);

            this.congratsText = this.game.add.text(this.game.world.centerX, 200, 'You Win!', { font: '32px Arial', fill: '#000', align: 'center' });
            this.congratsText.anchor.setTo(0.5, 0.5);

            this.instructionText = this.game.add.text(this.game.world.centerX, 300, 'Click To Play Again', { font: '16px Arial', fill: '#000', align: 'center' });
            this.instructionText.anchor.setTo(0.5, 0.5);
        }
    }, {
        key: 'restartGame',
        value: function restartGame() {
            this.game.state.start("Main");
        }
    }, {
        key: 'update',
        value: function update() {
            if (this.game.input.activePointer.justPressed()) {
                this.game.state.start('Main');
            }
        }
    }]);

    return GameOver;
}(Phaser.State);

exports.default = GameOver;

},{}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Player = require('../objects/Player');

var _Player2 = _interopRequireDefault(_Player);

var _Obstacle = require('../objects/Obstacle');

var _Obstacle2 = _interopRequireDefault(_Obstacle);

var _Interface = require('../controllers/Interface');

var _Interface2 = _interopRequireDefault(_Interface);

var _Background = require('../objects/Background');

var _Background2 = _interopRequireDefault(_Background);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Main = function (_Phaser$State) {
    _inherits(Main, _Phaser$State);

    function Main() {
        _classCallCheck(this, Main);

        return _possibleConstructorReturn(this, (Main.__proto__ || Object.getPrototypeOf(Main)).apply(this, arguments));
    }

    _createClass(Main, [{
        key: 'create',
        value: function create() {
            $('#name').hide();
            //Enable Arcade Physics
            this.game.physics.startSystem(Phaser.Physics.ARCADE);

            //Set the games background colour
            this.game.stage.backgroundColor = '#cecece';

            this.background = new _Background2.default(this.game, 'mountain_bg');
            this.background.create();

            this.player = new _Player2.default(this.game);
            this.player.create();

            this.obstacles = new _Obstacle2.default(this.game, 10, 2);

            this.interface = new _Interface2.default(this.game);
            this.interface.create();

            this.addControls();
            this.addTimers();

            // socket.io
            this.socket = io();
        }
    }, {
        key: 'update',
        value: function update() {

            this.game.physics.arcade.overlap(this.player.sprite, this.obstacles.spriteGroup, this.endGame, null, this);

            // Check if out of bounds
            if (this.player.isOutOfBounds()) {
                this.endGame();
            }

            // Check if  helicopter is rising
            if (this.player.isRising) {
                this.player.increaseVerticalVelocity();
            }

            this.background.update();
        }
    }, {
        key: 'addControls',
        value: function addControls() {
            this.game.input.onDown.add(this.player.setRising, this.player);
            this.game.input.onUp.add(this.player.setFalling, this.player);
        }
    }, {
        key: 'addTimers',
        value: function addTimers() {
            this.game.time.events.loop(5000, this.obstacles.create, this.obstacles);
            this.game.time.events.loop(Phaser.Timer.SECOND, this.interface.incrementTime, this.interface);
            this.game.time.events.loop(1, this.interface.incrementScore, this.interface);
        }
    }, {
        key: 'endGame',
        value: function endGame() {

            var postData = {
                "id": this.uuidv4(),
                "name": $('#name').val(),
                "score": this.interface.getScore(),
                "time": new Date().getTime()
            };
            $.ajax({
                type: 'POST',
                url: 'https://qn907f9vwe.execute-api.eu-west-1.amazonaws.com/prod/scores',
                data: JSON.stringify(postData),
                dataType: 'JSON',
                contentType: "application/json",
                crossDomain: true
            });

            console.log(JSON.stringify(postData));
            this.socket.emit('score', JSON.stringify(postData));
            this.game.state.start('GameOver');
        }
    }, {
        key: 'render',
        value: function render() {
            this.player.render(false);
            this.obstacles.render(false);
        }
    }, {
        key: 'uuidv4',
        value: function uuidv4() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = Math.random() * 16 | 0,
                    v = c == 'x' ? r : r & 0x3 | 0x8;
                return v.toString(16);
            });
        }
    }]);

    return Main;
}(Phaser.State);

var newsocket = io('http://ec2-18-216-24-220.us-east-2.compute.amazonaws.com:8080/');
newsocket.on('control-change', function (msg) {
    //$('#messages').append($('<li>').text(msg));
    console.log('message: ', msg);
    undefined.player.setRising();
    setTimeout(function () {
        undefined.player.setFalling();
    }, 500);
});

exports.default = Main;

},{"../controllers/Interface":1,"../objects/Background":3,"../objects/Obstacle":4,"../objects/Player":5}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Preloader = function (_Phaser$State) {
    _inherits(Preloader, _Phaser$State);

    function Preloader() {
        _classCallCheck(this, Preloader);

        return _possibleConstructorReturn(this, (Preloader.__proto__ || Object.getPrototypeOf(Preloader)).apply(this, arguments));
    }

    _createClass(Preloader, [{
        key: 'preload',
        value: function preload() {
            //this.asset = this.add.sprite(this.game.world.centerX, this.game.world.centerY, 'preloader');
            //this.asset.anchor.setTo(0.5, 0.5);

            this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
            //this.load.setPreloadSprite(this.asset);

            this.game.load.image('background', 'images/sky.png');
            this.game.load.image('grass_bg', 'images/grass_bg.png');
            this.game.load.image('mountain_bg', 'images/mountain_bg.png');
            //this.game.load.image('balloon_1', 'images/balloon_1.png');
            this.game.load.atlas('birds', 'images/birds.png', 'images/birds.json');
            this.game.load.atlas('player', 'images/player.png', 'images/player.json');
        }
    }, {
        key: 'create',
        value: function create() {
            //this.asset.cropEnabled = false;
            //this.game.state.start('Main');
        }
    }, {
        key: 'update',
        value: function update() {
            if (!!this.ready) {
                this.game.state.start('Title');
            }
        }
    }, {
        key: 'onLoadComplete',
        value: function onLoadComplete() {
            this.ready = true;
        }
    }]);

    return Preloader;
}(Phaser.State);

exports.default = Preloader;

},{}],10:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Background = require('../objects/Background');

var _Background2 = _interopRequireDefault(_Background);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Title = function (_Phaser$State) {
  _inherits(Title, _Phaser$State);

  function Title() {
    _classCallCheck(this, Title);

    return _possibleConstructorReturn(this, (Title.__proto__ || Object.getPrototypeOf(Title)).apply(this, arguments));
  }

  _createClass(Title, [{
    key: 'create',
    value: function create() {
      this.background = new _Background2.default(this.game, 'grass_bg');
      this.background.create();

      var style = { font: '65px Arial', fill: '#000000', align: 'center' };

      this.titleText = this.game.add.text(this.game.world.centerX, 300, 'Sonic BOOM!', style);
      this.titleText.anchor.setTo(0.5, 0.5);

      this.instructionsText = this.game.add.text(this.game.world.centerX, 400, 'Click anywhere to play', { font: '16px Arial', fill: '#000000', align: 'center' });
      this.instructionsText.anchor.setTo(0.5, 0.5);

      $('#name').show();
    }
  }, {
    key: 'update',
    value: function update() {
      var playerName = $("#name").val();
      if (playerName != "" && this.game.input.activePointer.justPressed()) {
        this.game.state.start('Main');
      }
    }
  }]);

  return Title;
}(Phaser.State);

exports.default = Title;

},{"../objects/Background":3}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJnYW1lXFxjb250cm9sbGVyc1xcSW50ZXJmYWNlLmpzIiwiZ2FtZVxcZ2FtZS5qcyIsImdhbWVcXG9iamVjdHNcXEJhY2tncm91bmQuanMiLCJnYW1lXFxvYmplY3RzXFxPYnN0YWNsZS5qcyIsImdhbWVcXG9iamVjdHNcXFBsYXllci5qcyIsImdhbWVcXHN0YXRlc1xcQm9vdC5qcyIsImdhbWVcXHN0YXRlc1xcR2FtZU92ZXIuanMiLCJnYW1lXFxzdGF0ZXNcXE1haW4uanMiLCJnYW1lXFxzdGF0ZXNcXFByZWxvYWRlci5qcyIsImdhbWVcXHN0YXRlc1xcVGl0bGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lDQU0sUztBQUNGLHVCQUFZLElBQVosRUFBa0I7QUFBQTs7QUFDZCxhQUFLLElBQUwsR0FBWSxJQUFaO0FBQ0EsYUFBSyxLQUFMLEdBQWEsQ0FBYjtBQUNBLGFBQUssSUFBTCxHQUFZLENBQVo7QUFDQSxhQUFLLFNBQUwsR0FBaUIsRUFBRSxRQUFGLENBQWpCO0FBQ0EsYUFBSyxRQUFMLEdBQWdCLEVBQUUsT0FBRixDQUFoQjtBQUNIOzs7O2lDQUVRO0FBQ0wsaUJBQUssS0FBTDtBQUNIOzs7eUNBRWdCO0FBQ2IsaUJBQUssU0FBTCxDQUFlLElBQWYsQ0FBb0IsWUFBWSxLQUFLLEtBQUwsRUFBaEM7QUFDSDs7O3dDQUVlO0FBQ1osaUJBQUssUUFBTCxDQUFjLElBQWQsQ0FBbUIsV0FBVyxLQUFLLElBQUwsRUFBWCxHQUF5QixHQUE1QztBQUNIOzs7bUNBRVU7QUFDUCxtQkFBTyxLQUFLLEtBQVo7QUFDSDs7O2dDQUVPO0FBQ0osaUJBQUssS0FBTCxHQUFhLENBQWI7QUFDQSxpQkFBSyxJQUFMLEdBQVksQ0FBWjtBQUNBLGlCQUFLLFNBQUwsQ0FBZSxJQUFmO0FBQ0EsaUJBQUssUUFBTCxDQUFjLElBQWQ7QUFDQSxpQkFBSyxTQUFMLENBQWUs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IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY2xhc3MgSW50ZXJmYWNlIHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lKSB7XG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgICAgICB0aGlzLnRpbWUgPSAwO1xuICAgICAgICB0aGlzLnNjb3JlVGV4dCA9ICQoXCIjc2NvcmVcIik7XG4gICAgICAgIHRoaXMudGltZVRleHQgPSAkKFwiI3RpbWVcIik7XG4gICAgfVxuXG4gICAgY3JlYXRlKCkge1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgaW5jcmVtZW50U2NvcmUoKSB7XG4gICAgICAgIHRoaXMuc2NvcmVUZXh0LnRleHQoXCJTY29yZTogXCIgKyB0aGlzLnNjb3JlKyspO1xuICAgIH1cblxuICAgIGluY3JlbWVudFRpbWUoKSB7XG4gICAgICAgIHRoaXMudGltZVRleHQudGV4dChcIlRpbWU6IFwiICsgdGhpcy50aW1lKysgKyBcInNcIik7XG4gICAgfVxuXG4gICAgZ2V0U2NvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3JlO1xuICAgIH1cblxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgICAgdGhpcy50aW1lID0gMDtcbiAgICAgICAgdGhpcy5zY29yZVRleHQuc2hvdygpO1xuICAgICAgICB0aGlzLnRpbWVUZXh0LnNob3coKTtcbiAgICAgICAgdGhpcy5zY29yZVRleHQudGV4dChcIlNjb3JlOiBcIiArIHRoaXMuc2NvcmUpO1xuICAgICAgICB0aGlzLnRpbWVUZXh0LnRleHQoXCJUaW1lOiBcIiArIHRoaXMudGltZSArIFwic1wiKTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW50ZXJmYWNlOyIsImltcG9ydCBCb290IGZyb20gJy4vc3RhdGVzL0Jvb3QnO1xuaW1wb3J0IFByZWxvYWRlciBmcm9tICcuL3N0YXRlcy9QcmVsb2FkZXInO1xuaW1wb3J0IFRpdGxlIGZyb20gJy4vc3RhdGVzL1RpdGxlJztcbmltcG9ydCBNYWluIGZyb20gJy4vc3RhdGVzL01haW4nO1xuaW1wb3J0IEdhbWVPdmVyIGZyb20gJy4vc3RhdGVzL0dhbWVPdmVyJztcblxuY2xhc3MgR2FtZSBleHRlbmRzIFBoYXNlci5HYW1lIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIod2luZG93LmlubmVyV2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgd2luZG93LmlubmVySGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIFBoYXNlci5BVVRPKTtcbiAgICB0aGlzLnN0YXRlLmFkZCgnQm9vdCcsIEJvb3QsIGZhbHNlKTtcbiAgICB0aGlzLnN0YXRlLmFkZCgnUHJlbG9hZGVyJywgUHJlbG9hZGVyLCBmYWxzZSk7XG4gICAgdGhpcy5zdGF0ZS5hZGQoJ1RpdGxlJywgVGl0bGUsIGZhbHNlKTtcbiAgICB0aGlzLnN0YXRlLmFkZCgnTWFpbicsIE1haW4sIGZhbHNlKTtcbiAgICB0aGlzLnN0YXRlLmFkZCgnR2FtZU92ZXInLCBHYW1lT3ZlciwgZmFsc2UpO1xuXG4gICAgdGhpcy5zdGF0ZS5zdGFydCgnQm9vdCcpO1xuICB9XG59XG5cbm5ldyBHYW1lKCk7IiwiY2xhc3MgQmFja2dyb3VuZCB7XG4gICAgY29uc3RydWN0b3IoZ2FtZSwgdGV4dHVyZSkge1xuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgICAgICB0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBudWxsO1xuICAgIH1cblxuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gdGhpcy5nYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsXG4gICAgICAgICAgICB0aGlzLmdhbWUud2lkdGgsXG4gICAgICAgICAgICB0aGlzLmdhbWUuaGVpZ2h0LFxuICAgICAgICAgICAgdGhpcy50ZXh0dXJlKTtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLnRpbGVTY2FsZS5zZXRUbyh0aGlzLmJhY2tncm91bmQuaGVpZ2h0IC8gdGhpcy5iYWNrZ3JvdW5kLnRleHR1cmUuaGVpZ2h0KTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC50aWxlUG9zaXRpb24ueCAtPSAyO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmFja2dyb3VuZDsiLCJjbGFzcyBPYnN0YWNsZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihnYW1lLCBudW1PYnN0YWNsZXMsIGZyYW1lc1Blck9ic3RhY2xlKXtcblxuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgICAgICB0aGlzLm9ic3RhY2xlR3JvdXAgPSBudWxsO1xuICAgICAgICB0aGlzLnNwcml0ZUdyb3VwID0gbnVsbDtcbiAgICAgICAgdGhpcy5vYnN0YWNsZVNwZWVkID0gMzAwO1xuICAgICAgICB0aGlzLm51bU9ic3RhY2xlcyA9IG51bU9ic3RhY2xlcztcbiAgICAgICAgdGhpcy5mcmFtZXNQZXJPYnN0YWNsZSA9IGZyYW1lc1Blck9ic3RhY2xlO1xuXG4gICAgICAgIGxldCBzZWVkID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5yYW5kb20gPSBuZXcgUGhhc2VyLlJhbmRvbURhdGFHZW5lcmF0b3IoW3NlZWRdKTtcblxuICAgICAgICB0aGlzLmluaXRPYnN0YWNsZXMoKTtcbiAgICB9XG5cbiAgICBpbml0T2JzdGFjbGVzKCl7XG5cbiAgICAgICAgdGhpcy5vYnN0YWNsZU1pblNpemUgPSA1MDtcbiAgICAgICAgdGhpcy5vYnN0YWNsZU1heFNpemUgPSAyMDA7XG5cbiAgICAgICAgdGhpcy5zcHJpdGVHcm91cCA9IHRoaXMuZ2FtZS5hZGQuZ3JvdXAoKTtcbiAgICAgICAgdGhpcy5zcHJpdGVHcm91cC5lbmFibGVCb2R5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zcHJpdGVHcm91cC5jcmVhdGVNdWx0aXBsZSgxMCwgJ2JpcmRzJyk7XG5cbiAgICB9XG5cbiAgICBjcmVhdGUoKXtcbiAgICAgICAgbGV0IG9ic3RhY2xlID0gdGhpcy5zcHJpdGVHcm91cC5nZXRGaXJzdERlYWQodHJ1ZSk7XG5cblxuICAgICAgICAvL3RoaXMuc3ByaXRlR3JvdXAucmVzZXRDaGlsZChvYnN0YWNsZSwgdGhpcy5nYW1lLndvcmxkLndpZHRoLCB0aGlzLnJhbmRvbS5pbnRlZ2VySW5SYW5nZSgwLCB0aGlzLmdhbWUud29ybGQuaGVpZ2h0IC0gb2JzdGFjbGVTaXplKSwgb2JzdGFjbGVTcHJpdGVUZXh0dXJlKTtcblxuICAgICAgICBvYnN0YWNsZS5yZXNldCh0aGlzLmdhbWUud29ybGQud2lkdGgsIHRoaXMucmFuZG9tLmludGVnZXJJblJhbmdlKDAsIHRoaXMuZ2FtZS53b3JsZC5oZWlnaHQpKTtcblxuICAgICAgICBsZXQgcmFuZG9tQmlyZCA9IHRoaXMucmFuZG9tLmludGVnZXJJblJhbmdlKDAsIHRoaXMubnVtT2JzdGFjbGVzIC8gdGhpcy5mcmFtZXNQZXJPYnN0YWNsZSkgKiB0aGlzLmZyYW1lc1Blck9ic3RhY2xlO1xuXG4gICAgICAgIG9ic3RhY2xlLmZyYW1lID0gcmFuZG9tQmlyZDtcbiAgICAgICAgb2JzdGFjbGUuYW5pbWF0aW9ucy5hZGQoJ2ZseScsIFtyYW5kb21CaXJkLCByYW5kb21CaXJkICsgMV0sIDUsIHRydWUpO1xuICAgICAgICBvYnN0YWNsZS5hbmltYXRpb25zLnBsYXkoJ2ZseScpO1xuICAgICAgICBvYnN0YWNsZS5hbmNob3Iuc2V0VG8oLjUsLjUpO1xuICAgICAgICBvYnN0YWNsZS5zY2FsZS54ID0gLTAuNTtcbiAgICAgICAgb2JzdGFjbGUuc2NhbGUueSA9IDAuNVxuXG5cblxuICAgICAgICBvYnN0YWNsZS5ib2R5LmdyYXZpdHkueSA9IDA7XG5cbiAgICAgICAgb2JzdGFjbGUuYm9keS52ZWxvY2l0eS54ID0gLXRoaXMub2JzdGFjbGVTcGVlZDtcbiAgICAgICAgb2JzdGFjbGUuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuXG4gICAgICAgIC8vV2hlbiB0aGUgYmxvY2sgbGVhdmVzIHRoZSBzY3JlZW4sIGtpbGwgaXRcbiAgICAgICAgb2JzdGFjbGUuY2hlY2tXb3JsZEJvdW5kcyA9IHRydWU7XG4gICAgICAgIG9ic3RhY2xlLm91dE9mQm91bmRzS2lsbCA9IHRydWU7XG5cblxuICAgIH1cblxuICAgIHJlbmRlcihkZWJ1Zykge1xuICAgICAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgICAgIGxldCBnYW1lID0gdGhpcy5nYW1lO1xuICAgICAgICAgICAgdGhpcy5zcHJpdGVHcm91cC5mb3JFYWNoKGZ1bmN0aW9uKHNwcml0ZSkge1xuICAgICAgICAgICAgICAgIGdhbWUuZGVidWcuYm9keShzcHJpdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgT2JzdGFjbGU7IiwiY2xhc3MgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lKSB7XG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgICAgIHRoaXMuaXNSaXNpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zcHJpdGUgPSBudWxsO1xuICAgIH1cblxuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgbGV0IHBsYXllclNwcml0ZSA9IG5ldyBQaGFzZXIuR3JhcGhpY3ModGhpcy5nYW1lKVxuICAgICAgICAgICAgLmJlZ2luRmlsbChQaGFzZXIuQ29sb3IuaGV4VG9SR0IoJyMyYzNlNTAnKSwgMSlcbiAgICAgICAgICAgIC5kcmF3UmVjdCgwLCAwLCAxMDAsIDEwMCk7XG5cbiAgICAgICAgbGV0IHNwcml0ZVRleHR1cmUgPSBwbGF5ZXJTcHJpdGUuZ2VuZXJhdGVUZXh0dXJlKCk7XG5cbiAgICAgICAgdGhpcy5zcHJpdGUgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLmdhbWUud29ybGQuY2VudGVyWCwgdGhpcy5nYW1lLndvcmxkLmNlbnRlclksICdwbGF5ZXInKTtcbiAgICAgICAgLy90aGlzLnNwcml0ZSA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLCB0aGlzLmdhbWUud29ybGQuY2VudGVyWSwgc3ByaXRlVGV4dHVyZSk7XG5cbiAgICAgICAgLy90aGlzLnNwcml0ZS5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgICAgICB0aGlzLnNwcml0ZS5zY2FsZS5zZXQoMC41KTtcbiAgICAgICAgdGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLnNwcml0ZSk7XG4gICAgICAgIHRoaXMuc3ByaXRlLmVuYWJsZUJvZHkgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuc3ByaXRlLmFuaW1hdGlvbnMuYWRkKCdmbHknLCBQaGFzZXIuQW5pbWF0aW9uLmdlbmVyYXRlRnJhbWVOYW1lcygnJywgMSwgMiwgJy5wbmcnLCA0KSwgNSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuc3ByaXRlLmFuaW1hdGlvbnMucGxheSgnZmx5Jyk7XG5cbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5ncmF2aXR5LnkgPSA1MDA7XG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkudmVsb2NpdHkueSA9IC0yMDA7XG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkubWF4VmVsb2NpdHkueSA9IDIwMDtcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5jb2xsaWRlV29ybGRCb3VuZHMgPSBmYWxzZTtcblxuICAgICAgICAvL2NhbGN1bGF0ZSBjZW50cmUgZm9yIGJvdW5kaW5nIGJveFxuICAgICAgICBsZXQgc2NhbGVGYWN0b3IgPSAwLjk7XG4gICAgICAgIC8qXG4gICAgICAgIGxldCBuZXdXaWR0aCA9IHRoaXMuc3ByaXRlLndpZHRoICogc2NhbGVGYWN0b3I7XG4gICAgICAgIGxldCBuZXdIZWlnaHQgPSB0aGlzLnNwcml0ZS5oZWlnaHQgKiBzY2FsZUZhY3RvclxuICAgICAgICBsZXQgY2VudHJlWCA9ICh0aGlzLnNwcml0ZS53aWR0aCAtIChuZXdXaWR0aCkpIC8yO1xuICAgICAgICBsZXQgY2VudHJlWSA9ICh0aGlzLnNwcml0ZS5oZWlnaHQgLSAobmV3SGVpZ2h0KSkgLzI7XG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkud2lkdGggKj0gc2NhbGVGYWN0b3I7Ki9cbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5oZWlnaHQgKj0gc2NhbGVGYWN0b3I7LypcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5zZXRTaXplKG5ld1dpZHRoLCBuZXdIZWlnaHQsIGNlbnRyZVgsIGNlbnRyZVkpOyovXG5cbiAgICB9XG5cbiAgICBzZXRSaXNpbmcoKXtcbiAgICAgICAgdGhpcy5pc1Jpc2luZyA9IHRydWU7XG4gICAgfVxuXG4gICAgc2V0RmFsbGluZygpe1xuICAgICAgICB0aGlzLmlzUmlzaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaW5jcmVhc2VWZXJ0aWNhbFZlbG9jaXR5KCl7XG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkudmVsb2NpdHkueSAtPSAzMDtcbiAgICB9XG5cbiAgICBpc091dE9mQm91bmRzKCl7XG5cbiAgICAgICAgbGV0IHBvc2l0aW9uID0gdGhpcy5zcHJpdGUuYm9keS5wb3NpdGlvbi55O1xuXG4gICAgICAgIHJldHVybiBwb3NpdGlvbiA+IHRoaXMuZ2FtZS53b3JsZC5oZWlnaHQgfHwgcG9zaXRpb24gPCAwO1xuXG4gICAgfVxuXG4gICAgcmVuZGVyKGRlYnVnKSB7XG4gICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICAgdGhpcy5nYW1lLmRlYnVnLmJvZHkodGhpcy5zcHJpdGUpO1xuICAgICAgICAgICAgdGhpcy5nYW1lLmRlYnVnLnBpeGVsKHRoaXMuc3ByaXRlLngsIHRoaXMuc3ByaXRlLnksICdyZWQnLCA0KTtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5kZWJ1Zy5zcHJpdGVCb3VuZHModGhpcy5zcHJpdGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQbGF5ZXI7IiwiY2xhc3MgQm9vdCBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG4gICAgcHJlbG9hZCgpIHtcbiAgICAgICAgdGhpcy5nYW1lLmxvYWQuYXRsYXMoJ3ByZWxvYWRlcicsICdpbWFnZXMvcHJlbG9hZGVyLnBuZycsICdpbWFnZXMvcHJlbG9hZGVyLmpzb24nKTtcbiAgICB9XG4gICAgY3JlYXRlICgpIHtcbiAgICAgICAgdGhpcy5zY2FsZS5zY2FsZU1vZGUgPSBQaGFzZXIuU2NhbGVNYW5hZ2VyLlNIT1dfQUxMO1xuICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ1ByZWxvYWRlcicpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQm9vdDsiLCJjbGFzcyBHYW1lT3ZlciBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG4gICAgY3JlYXRlKCkge1xuICAgICAgICB2YXIgc3R5bGUgPSB7IGZvbnQ6ICc2NXB4IEFyaWFsJywgZmlsbDogJyMwMDAwMDAnLCBhbGlnbjogJ2NlbnRlcid9O1xuICAgICAgICB0aGlzLnRpdGxlVGV4dCA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmdhbWUud29ybGQuY2VudGVyWCwxMDAsICdHYW1lIE92ZXIhJywgc3R5bGUpO1xuICAgICAgICB0aGlzLnRpdGxlVGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gICAgICAgIHRoaXMuY29uZ3JhdHNUZXh0ID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLCAyMDAsICdZb3UgV2luIScsIHsgZm9udDogJzMycHggQXJpYWwnLCBmaWxsOiAnIzAwMCcsIGFsaWduOiAnY2VudGVyJ30pO1xuICAgICAgICB0aGlzLmNvbmdyYXRzVGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25UZXh0ID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLCAzMDAsICdDbGljayBUbyBQbGF5IEFnYWluJywgeyBmb250OiAnMTZweCBBcmlhbCcsIGZpbGw6ICcjMDAwJywgYWxpZ246ICdjZW50ZXInfSk7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25UZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgfVxuXG4gICAgcmVzdGFydEdhbWUoKSB7XG4gICAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydChcIk1haW5cIik7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZih0aGlzLmdhbWUuaW5wdXQuYWN0aXZlUG9pbnRlci5qdXN0UHJlc3NlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ01haW4nKTtcbiAgICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHYW1lT3ZlcjtcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAnLi4vb2JqZWN0cy9QbGF5ZXInO1xuaW1wb3J0IE9ic3RhY2xlIGZyb20gJy4uL29iamVjdHMvT2JzdGFjbGUnO1xuaW1wb3J0IEludGVyZmFjZSBmcm9tICcuLi9jb250cm9sbGVycy9JbnRlcmZhY2UnO1xuaW1wb3J0IEJhY2tncm91bmQgZnJvbSAnLi4vb2JqZWN0cy9CYWNrZ3JvdW5kJztcblxuY2xhc3MgTWFpbiBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG4gICAgY3JlYXRlKCkge1xuICAgICAgICAkKCcjbmFtZScpLmhpZGUoKTtcbiAgICAgICAgLy9FbmFibGUgQXJjYWRlIFBoeXNpY3NcbiAgICAgICAgdGhpcy5nYW1lLnBoeXNpY3Muc3RhcnRTeXN0ZW0oUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcblxuICAgICAgICAvL1NldCB0aGUgZ2FtZXMgYmFja2dyb3VuZCBjb2xvdXJcbiAgICAgICAgdGhpcy5nYW1lLnN0YWdlLmJhY2tncm91bmRDb2xvciA9ICcjY2VjZWNlJztcblxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsICdtb3VudGFpbl9iZycpO1xuICAgICAgICB0aGlzLmJhY2tncm91bmQuY3JlYXRlKCk7XG5cbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgUGxheWVyKHRoaXMuZ2FtZSk7XG4gICAgICAgIHRoaXMucGxheWVyLmNyZWF0ZSgpO1xuXG4gICAgICAgIHRoaXMub2JzdGFjbGVzID0gbmV3IE9ic3RhY2xlKHRoaXMuZ2FtZSwgMTAsIDIpO1xuXG4gICAgICAgIHRoaXMuaW50ZXJmYWNlID0gbmV3IEludGVyZmFjZSh0aGlzLmdhbWUpO1xuICAgICAgICB0aGlzLmludGVyZmFjZS5jcmVhdGUoKTtcblxuICAgICAgICB0aGlzLmFkZENvbnRyb2xzKCk7XG4gICAgICAgIHRoaXMuYWRkVGltZXJzKCk7XG5cbiAgICAgICAgLy8gc29ja2V0LmlvXG4gICAgICAgIHRoaXMuc29ja2V0ID0gaW8oKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG5cbiAgICAgICAgdGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLm92ZXJsYXAodGhpcy5wbGF5ZXIuc3ByaXRlLCB0aGlzLm9ic3RhY2xlcy5zcHJpdGVHcm91cCwgdGhpcy5lbmRHYW1lLCBudWxsLCB0aGlzKTtcblxuICAgICAgICAvLyBDaGVjayBpZiBvdXQgb2YgYm91bmRzXG4gICAgICAgIGlmKHRoaXMucGxheWVyLmlzT3V0T2ZCb3VuZHMoKSl7XG4gICAgICAgICAgICB0aGlzLmVuZEdhbWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmICBoZWxpY29wdGVyIGlzIHJpc2luZ1xuICAgICAgICBpZih0aGlzLnBsYXllci5pc1Jpc2luZyl7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5pbmNyZWFzZVZlcnRpY2FsVmVsb2NpdHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC51cGRhdGUoKTtcbiAgICB9XG5cblxuICAgIGFkZENvbnRyb2xzKCl7XG4gICAgICAgIHRoaXMuZ2FtZS5pbnB1dC5vbkRvd24uYWRkKHRoaXMucGxheWVyLnNldFJpc2luZywgdGhpcy5wbGF5ZXIpO1xuICAgICAgICB0aGlzLmdhbWUuaW5wdXQub25VcC5hZGQodGhpcy5wbGF5ZXIuc2V0RmFsbGluZywgdGhpcy5wbGF5ZXIpO1xuICAgIH1cblxuICAgIGFkZFRpbWVycygpe1xuICAgICAgICB0aGlzLmdhbWUudGltZS5ldmVudHMubG9vcCg1MDAwLCB0aGlzLm9ic3RhY2xlcy5jcmVhdGUsIHRoaXMub2JzdGFjbGVzKTtcbiAgICAgICAgdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmxvb3AoUGhhc2VyLlRpbWVyLlNFQ09ORCwgdGhpcy5pbnRlcmZhY2UuaW5jcmVtZW50VGltZSwgdGhpcy5pbnRlcmZhY2UpO1xuICAgICAgICB0aGlzLmdhbWUudGltZS5ldmVudHMubG9vcCgxLCB0aGlzLmludGVyZmFjZS5pbmNyZW1lbnRTY29yZSwgdGhpcy5pbnRlcmZhY2UpO1xuICAgIH1cblxuICAgIGVuZEdhbWUoKXtcblxuICAgICAgICB2YXIgcG9zdERhdGEgPSB7XG4gICAgICAgICAgIFwiaWRcIjogdGhpcy51dWlkdjQoKSxcbiAgICAgICAgICAgXCJuYW1lXCI6ICQoJyNuYW1lJykudmFsKCksXG4gICAgICAgICAgIFwic2NvcmVcIjogdGhpcy5pbnRlcmZhY2UuZ2V0U2NvcmUoKSxcbiAgICAgICAgICAgXCJ0aW1lXCI6IChuZXcgRGF0ZSkuZ2V0VGltZSgpXG4gICAgICAgIH1cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vcW45MDdmOXZ3ZS5leGVjdXRlLWFwaS5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbS9wcm9kL3Njb3JlcycsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShwb3N0RGF0YSksXG4gICAgICAgICAgICBkYXRhVHlwZTogJ0pTT04nLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgY3Jvc3NEb21haW46IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpKTtcbiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCgnc2NvcmUnLCBKU09OLnN0cmluZ2lmeShwb3N0RGF0YSkpO1xuICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ0dhbWVPdmVyJyk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLnBsYXllci5yZW5kZXIoZmFsc2UpO1xuICAgICAgICB0aGlzLm9ic3RhY2xlcy5yZW5kZXIoZmFsc2UpO1xuICAgIH1cblxuICAgIHV1aWR2NCgpIHtcbiAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgdmFyIHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLCB2ID0gYyA9PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpO1xuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgICB9KTtcbiAgICB9XG59XG52YXIgbmV3c29ja2V0ID0gaW8oJ2h0dHA6Ly9lYzItMTgtMjE2LTI0LTIyMC51cy1lYXN0LTIuY29tcHV0ZS5hbWF6b25hd3MuY29tOjgwODAvJyk7XG5uZXdzb2NrZXQub24oJ2NvbnRyb2wtY2hhbmdlJywgKG1zZyk9PiB7XG4gICAgLy8kKCcjbWVzc2FnZXMnKS5hcHBlbmQoJCgnPGxpPicpLnRleHQobXNnKSk7XG4gICAgY29uc29sZS5sb2coJ21lc3NhZ2U6ICcgLCBtc2cpO1xuICAgIHRoaXMucGxheWVyLnNldFJpc2luZygpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge3RoaXMucGxheWVyLnNldEZhbGxpbmcoKX0sIDUwMClcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBNYWluOyIsImNsYXNzIFByZWxvYWRlciBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG4gICAgcHJlbG9hZCgpIHtcbiAgICAgICAgLy90aGlzLmFzc2V0ID0gdGhpcy5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLCB0aGlzLmdhbWUud29ybGQuY2VudGVyWSwgJ3ByZWxvYWRlcicpO1xuICAgICAgICAvL3RoaXMuYXNzZXQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICAgICAgICB0aGlzLmxvYWQub25Mb2FkQ29tcGxldGUuYWRkT25jZSh0aGlzLm9uTG9hZENvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgLy90aGlzLmxvYWQuc2V0UHJlbG9hZFNwcml0ZSh0aGlzLmFzc2V0KTtcblxuICAgICAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnYmFja2dyb3VuZCcsICdpbWFnZXMvc2t5LnBuZycpO1xuICAgICAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnZ3Jhc3NfYmcnLCAnaW1hZ2VzL2dyYXNzX2JnLnBuZycpO1xuICAgICAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnbW91bnRhaW5fYmcnLCAnaW1hZ2VzL21vdW50YWluX2JnLnBuZycpO1xuICAgICAgICAvL3RoaXMuZ2FtZS5sb2FkLmltYWdlKCdiYWxsb29uXzEnLCAnaW1hZ2VzL2JhbGxvb25fMS5wbmcnKTtcbiAgICAgICAgdGhpcy5nYW1lLmxvYWQuYXRsYXMoJ2JpcmRzJywgJ2ltYWdlcy9iaXJkcy5wbmcnLCAnaW1hZ2VzL2JpcmRzLmpzb24nKTtcbiAgICAgICAgdGhpcy5nYW1lLmxvYWQuYXRsYXMoJ3BsYXllcicsICdpbWFnZXMvcGxheWVyLnBuZycsICdpbWFnZXMvcGxheWVyLmpzb24nKTtcbiAgICB9XG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIC8vdGhpcy5hc3NldC5jcm9wRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAvL3RoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnTWFpbicpO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYoISF0aGlzLnJlYWR5KSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ1RpdGxlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkxvYWRDb21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5yZWFkeSA9IHRydWU7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQcmVsb2FkZXI7IiwiaW1wb3J0IEJhY2tncm91bmQgZnJvbSAnLi4vb2JqZWN0cy9CYWNrZ3JvdW5kJztcblxuY2xhc3MgVGl0bGUgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuICBjcmVhdGUoKSB7XG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gbmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAnZ3Jhc3NfYmcnKTtcbiAgICAgIHRoaXMuYmFja2dyb3VuZC5jcmVhdGUoKTtcblxuICAgIHZhciBzdHlsZSA9IHsgZm9udDogJzY1cHggQXJpYWwnLCBmaWxsOiAnIzAwMDAwMCcsIGFsaWduOiAnY2VudGVyJ307XG5cbiAgICB0aGlzLnRpdGxlVGV4dCA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmdhbWUud29ybGQuY2VudGVyWCwgMzAwLCAnU29uaWMgQk9PTSEnLCBzdHlsZSk7XG4gICAgdGhpcy50aXRsZVRleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zVGV4dCA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmdhbWUud29ybGQuY2VudGVyWCwgNDAwLCAnQ2xpY2sgYW55d2hlcmUgdG8gcGxheScsIHsgZm9udDogJzE2cHggQXJpYWwnLCBmaWxsOiAnIzAwMDAwMCcsIGFsaWduOiAnY2VudGVyJ30pO1xuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zVGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gICAgJCgnI25hbWUnKS5zaG93KCk7XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgdmFyIHBsYXllck5hbWUgPSAkKFwiI25hbWVcIikudmFsKCk7XG4gICAgaWYocGxheWVyTmFtZSE9IFwiXCIgJiYgdGhpcy5nYW1lLmlucHV0LmFjdGl2ZVBvaW50ZXIuanVzdFByZXNzZWQoKSkge1xuICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNYWluJyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpdGxlOyJdfQ==
