(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Interface = function () {
    function Interface(game) {
        _classCallCheck(this, Interface);

        this.game = game;
        this.score = 0;
        this.time = 0;
        this.scoreText = $("#score");
        this.timeText = $("#time");
    }

    _createClass(Interface, [{
        key: "create",
        value: function create() {
            this.reset();
        }
    }, {
        key: "incrementScore",
        value: function incrementScore() {
            this.scoreText.text("Score: " + this.score++);
        }
    }, {
        key: "incrementTime",
        value: function incrementTime() {
            this.timeText.text("Time: " + this.time++ + "s");
        }
    }, {
        key: "getScore",
        value: function getScore() {
            return this.score;
        }
    }, {
        key: "reset",
        value: function reset() {
            this.score = 0;
            this.time = 0;
            this.scoreText.show();
            this.timeText.show();
            this.scoreText.text("Score: " + this.score);
            this.timeText.text("Time: " + this.time + "s");
        }
    }]);

    return Interface;
}();

exports.default = Interface;

},{}],2:[function(require,module,exports){
'use strict';

var _Boot = require('./states/Boot');

var _Boot2 = _interopRequireDefault(_Boot);

var _Preloader = require('./states/Preloader');

var _Preloader2 = _interopRequireDefault(_Preloader);

var _Title = require('./states/Title');

var _Title2 = _interopRequireDefault(_Title);

var _Main = require('./states/Main');

var _Main2 = _interopRequireDefault(_Main);

var _GameOver = require('./states/GameOver');

var _GameOver2 = _interopRequireDefault(_GameOver);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Game = function (_Phaser$Game) {
  _inherits(Game, _Phaser$Game);

  function Game() {
    _classCallCheck(this, Game);

    var _this = _possibleConstructorReturn(this, (Game.__proto__ || Object.getPrototypeOf(Game)).call(this, window.innerWidth * window.devicePixelRatio, window.innerHeight * window.devicePixelRatio, Phaser.AUTO));

    _this.state.add('Boot', _Boot2.default, false);
    _this.state.add('Preloader', _Preloader2.default, false);
    _this.state.add('Title', _Title2.default, false);
    _this.state.add('Main', _Main2.default, false);
    _this.state.add('GameOver', _GameOver2.default, false);

    _this.state.start('Boot');
    return _this;
  }

  return Game;
}(Phaser.Game);

new Game();

},{"./states/Boot":6,"./states/GameOver":7,"./states/Main":8,"./states/Preloader":9,"./states/Title":10}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Background = function () {
    function Background(game, texture) {
        _classCallCheck(this, Background);

        this.game = game;
        this.texture = texture;
        this.background = null;
    }

    _createClass(Background, [{
        key: "create",
        value: function create() {
            this.background = this.game.add.tileSprite(0, 0, this.game.width, this.game.height, this.texture);
            this.background.tileScale.setTo(this.background.height / this.background.texture.height);
        }
    }, {
        key: "update",
        value: function update() {
            this.background.tilePosition.x -= 2;
        }
    }]);

    return Background;
}();

exports.default = Background;

},{}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Obstacle = function () {
    function Obstacle(game, numObstacles, framesPerObstacle) {
        var _this = this;

        _classCallCheck(this, Obstacle);

        this.game = game;
        this.obstacleGroup = null;
        this.spriteGroup = null;

        this.numObstacles = numObstacles;
        this.framesPerObstacle = framesPerObstacle;
        this.timer = 10;
        var seed = Date.now();
        this.random = new Phaser.RandomDataGenerator([seed]);

        this.initObstacles();
        setInterval(function () {
            _this.obstacleSpeed = _this.obstacleSpeed + 100;
            //console.log('inside of the timout')
        }, 7000);
    }

    _createClass(Obstacle, [{
        key: 'initObstacles',
        value: function initObstacles() {
            this.obstacleSpeed = 300;
            this.obstacleMinSize = 50;
            this.obstacleMaxSize = 200;

            this.spriteGroup = this.game.add.group();
            this.spriteGroup.enableBody = true;
            this.spriteGroup.createMultiple(10, 'birds');
        }
    }, {
        key: 'create',
        value: function create() {
            var obstacle = this.spriteGroup.getFirstDead(true);

            //this.spriteGroup.resetChild(obstacle, this.game.world.width, this.random.integerInRange(0, this.game.world.height - obstacleSize), obstacleSpriteTexture);

            obstacle.reset(this.game.world.width, this.random.integerInRange(0, this.game.world.height));

            var randomBird = this.random.integerInRange(0, this.numObstacles / this.framesPerObstacle) * this.framesPerObstacle;

            obstacle.frame = randomBird;
            obstacle.animations.add('fly', [randomBird, randomBird + 1], 5, true);
            obstacle.animations.play('fly');
            obstacle.anchor.setTo(.5, .5);
            obstacle.scale.x = -0.5;
            obstacle.scale.y = 0.5;
            //obstacle.scale.set(0.5);


            obstacle.body.gravity.y = 0;
            console.log(this.obstacleSpeed);
            obstacle.body.velocity.x = -this.obstacleSpeed;
            obstacle.body.immovable = true;

            //When the block leaves the screen, kill it
            obstacle.checkWorldBounds = true;
            obstacle.outOfBoundsKill = true;
        }
    }, {
        key: 'render',
        value: function render(debug) {
            if (debug) {
                var game = this.game;
                this.spriteGroup.forEach(function (sprite) {
                    game.debug.body(sprite);
                });
            }
        }
    }]);

    return Obstacle;
}();

exports.default = Obstacle;

},{}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Player = function () {
    function Player(game) {
        _classCallCheck(this, Player);

        this.game = game;
        this.isRising = false;
        this.sprite = null;
    }

    _createClass(Player, [{
        key: 'create',
        value: function create() {
            var playerSprite = new Phaser.Graphics(this.game).beginFill(Phaser.Color.hexToRGB('#2c3e50'), 1).drawRect(0, 0, 100, 100);

            var spriteTexture = playerSprite.generateTexture();

            this.sprite = this.game.add.sprite(this.game.world.centerX, this.game.world.centerY, 'player');
            //this.sprite = this.game.add.sprite(this.game.world.centerX, this.game.world.centerY, spriteTexture);

            //this.sprite.anchor.setTo(0.5, 0.5);
            this.sprite.scale.set(0.3);
            //this.sprite.width = 100;
            //this.sprite.height = 50;

            this.game.physics.arcade.enable(this.sprite);
            this.sprite.enableBody = true;

            this.sprite.animations.add('fly', Phaser.Animation.generateFrameNames('', 1, 2, '.png', 4), 5, true);
            this.sprite.animations.play('fly');

            this.sprite.body.gravity.y = 500;
            this.sprite.body.velocity.y = -200;
            this.sprite.body.maxVelocity.y = 200;
            this.sprite.body.collideWorldBounds = false;

            //calculate centre for bounding box
            var scaleFactor = 0.9;
            /*
            let newWidth = this.sprite.width * scaleFactor;
            let newHeight = this.sprite.height * scaleFactor
            let centreX = (this.sprite.width - (newWidth)) /2;
            let centreY = (this.sprite.height - (newHeight)) /2;
            this.sprite.body.width *= scaleFactor;*/
            this.sprite.body.height *= scaleFactor; /*
                                                    this.sprite.body.setSize(newWidth, newHeight, centreX, centreY);*/
        }
    }, {
        key: 'setRising',
        value: function setRising() {
            this.isRising = true;
        }
    }, {
        key: 'setFalling',
        value: function setFalling() {
            this.isRising = false;
        }
    }, {
        key: 'increaseVerticalVelocity',
        value: function increaseVerticalVelocity() {
            this.sprite.body.velocity.y -= 30;
        }
    }, {
        key: 'isOutOfBounds',
        value: function isOutOfBounds() {

            var position = this.sprite.body.position.y + 50;
            return position > this.game.world.height || position < 0;
        }
    }, {
        key: 'render',
        value: function render(debug) {
            if (debug) {
                this.game.debug.body(this.sprite);
                this.game.debug.pixel(this.sprite.x, this.sprite.y, 'red', 4);
                this.game.debug.spriteBounds(this.sprite);
            }
        }
    }]);

    return Player;
}();

exports.default = Player;

},{}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Boot = function (_Phaser$State) {
    _inherits(Boot, _Phaser$State);

    function Boot() {
        _classCallCheck(this, Boot);

        return _possibleConstructorReturn(this, (Boot.__proto__ || Object.getPrototypeOf(Boot)).apply(this, arguments));
    }

    _createClass(Boot, [{
        key: 'preload',
        value: function preload() {
            this.game.load.atlas('preloader', 'images/preloader.png', 'images/preloader.json');
        }
    }, {
        key: 'create',
        value: function create() {
            this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
            this.game.state.start('Preloader');
        }
    }]);

    return Boot;
}(Phaser.State);

exports.default = Boot;

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GameOver = function (_Phaser$State) {
    _inherits(GameOver, _Phaser$State);

    function GameOver() {
        _classCallCheck(this, GameOver);

        return _possibleConstructorReturn(this, (GameOver.__proto__ || Object.getPrototypeOf(GameOver)).apply(this, arguments));
    }

    _createClass(GameOver, [{
        key: 'create',
        value: function create() {
            var style = { font: '65px Arial', fill: '#000000', align: 'center' };
            this.titleText = this.game.add.text(this.game.world.centerX, 100, 'Game Over!', style);
            this.titleText.anchor.setTo(0.5, 0.5);

            this.congratsText = this.game.add.text(this.game.world.centerX, 200, 'You Win!', { font: '32px Arial', fill: '#000', align: 'center' });
            this.congratsText.anchor.setTo(0.5, 0.5);

            this.instructionText = this.game.add.text(this.game.world.centerX, 300, 'Click To Play Again', { font: '16px Arial', fill: '#000', align: 'center' });
            this.instructionText.anchor.setTo(0.5, 0.5);
        }
    }, {
        key: 'restartGame',
        value: function restartGame() {
            this.game.state.start("Main");
        }
    }, {
        key: 'update',
        value: function update() {
            if (this.game.input.activePointer.justPressed()) {
                this.game.state.start('Main');
            }
        }
    }]);

    return GameOver;
}(Phaser.State);

exports.default = GameOver;

},{}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Player = require('../objects/Player');

var _Player2 = _interopRequireDefault(_Player);

var _Obstacle = require('../objects/Obstacle');

var _Obstacle2 = _interopRequireDefault(_Obstacle);

var _Interface = require('../controllers/Interface');

var _Interface2 = _interopRequireDefault(_Interface);

var _Background = require('../objects/Background');

var _Background2 = _interopRequireDefault(_Background);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Main = function (_Phaser$State) {
    _inherits(Main, _Phaser$State);

    function Main() {
        _classCallCheck(this, Main);

        return _possibleConstructorReturn(this, (Main.__proto__ || Object.getPrototypeOf(Main)).apply(this, arguments));
    }

    _createClass(Main, [{
        key: 'create',
        value: function create() {
            var _this2 = this;

            $('#name').hide();
            //Enable Arcade Physics
            this.game.physics.startSystem(Phaser.Physics.ARCADE);

            //Set the games background colour
            this.game.stage.backgroundColor = '#cecece';

            this.background = new _Background2.default(this.game, 'mountain_bg');
            this.background.create();

            this.player = new _Player2.default(this.game);
            this.player.create();

            this.obstacles = new _Obstacle2.default(this.game, 10, 2);

            this.interface = new _Interface2.default(this.game);
            this.interface.create();

            this.addControls();
            this.addTimers();

            // socket.io
            this.socket = io();
            this.socket.on('control-change', function (msg) {
                if (msg === '0') {
                    _this2.player.setFalling();
                } else {
                    _this2.player.setRising();
                }
            });
        }
    }, {
        key: 'update',
        value: function update() {

            if (this.checkOverlap(this.obstacles.spriteGroup, this.player.sprite)) {
                this.endGame();
            }

            //this.game.physics.arcade.overlap(, , this.endGame, null, this);

            // Check if out of bounds
            if (this.player.isOutOfBounds()) {
                this.endGame();
            }

            // Check if  helicopter is rising
            if (this.player.isRising) {
                this.player.increaseVerticalVelocity();
            }

            this.background.update();
        }
    }, {
        key: 'checkOverlap',
        value: function checkOverlap(spriteA, spriteB) {

            var boundsA = spriteA.getBounds();
            var boundsB = spriteB.getBounds();
            boundsA.height = boundsA.height - 10;
            boundsA.width = boundsA.width - 10;
            if (Phaser.Rectangle.intersects(boundsA, boundsB) && boundsA.width < 200) {
                return true;
            }
            //return Phaser.Rectangle.intersects(boundsA, boundsB);
        }
    }, {
        key: 'addControls',
        value: function addControls() {
            this.game.input.onDown.add(this.player.setRising, this.player);
            this.game.input.onUp.add(this.player.setFalling, this.player);
        }
    }, {
        key: 'addTimers',
        value: function addTimers() {
            this.game.time.events.loop(5000, this.obstacles.create, this.obstacles);
            this.game.time.events.loop(Phaser.Timer.SECOND, this.interface.incrementTime, this.interface);
            this.game.time.events.loop(1, this.interface.incrementScore, this.interface);
        }
    }, {
        key: 'endGame',
        value: function endGame() {

            var postData = {
                "id": this.uuidv4(),
                "name": $('#name').val(),
                "score": this.interface.getScore(),
                "time": new Date().getTime()
            };
            $.ajax({
                type: 'POST',
                url: 'https://qn907f9vwe.execute-api.eu-west-1.amazonaws.com/prod/scores',
                data: JSON.stringify(postData),
                dataType: 'JSON',
                contentType: "application/json",
                crossDomain: true
            });

            console.log(JSON.stringify(postData));
            this.socket.emit('score', JSON.stringify(postData));
            this.game.state.start('GameOver');
        }
    }, {
        key: 'render',
        value: function render() {
            this.player.render(false);
            this.obstacles.render(false);
        }
    }, {
        key: 'uuidv4',
        value: function uuidv4() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = Math.random() * 16 | 0,
                    v = c == 'x' ? r : r & 0x3 | 0x8;
                return v.toString(16);
            });
        }
    }]);

    return Main;
}(Phaser.State);

exports.default = Main;

},{"../controllers/Interface":1,"../objects/Background":3,"../objects/Obstacle":4,"../objects/Player":5}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Preloader = function (_Phaser$State) {
    _inherits(Preloader, _Phaser$State);

    function Preloader() {
        _classCallCheck(this, Preloader);

        return _possibleConstructorReturn(this, (Preloader.__proto__ || Object.getPrototypeOf(Preloader)).apply(this, arguments));
    }

    _createClass(Preloader, [{
        key: 'preload',
        value: function preload() {
            //this.asset = this.add.sprite(this.game.world.centerX, this.game.world.centerY, 'preloader');
            //this.asset.anchor.setTo(0.5, 0.5);

            this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
            //this.load.setPreloadSprite(this.asset);

            this.game.load.image('background', 'images/sky.png');
            this.game.load.image('grass_bg', 'images/grass_bg.png');
            this.game.load.image('mountain_bg', 'images/mountain_bg.png');
            //this.game.load.image('balloon_1', 'images/balloon_1.png');
            this.game.load.atlas('birds', 'images/birds.png', 'images/birds.json');
            this.game.load.atlas('player', 'images/player.png', 'images/player.json');
        }
    }, {
        key: 'create',
        value: function create() {
            //this.asset.cropEnabled = false;
            //this.game.state.start('Main');
        }
    }, {
        key: 'update',
        value: function update() {
            if (!!this.ready) {
                this.game.state.start('Title');
            }
        }
    }, {
        key: 'onLoadComplete',
        value: function onLoadComplete() {
            this.ready = true;
        }
    }]);

    return Preloader;
}(Phaser.State);

exports.default = Preloader;

},{}],10:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Background = require('../objects/Background');

var _Background2 = _interopRequireDefault(_Background);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Title = function (_Phaser$State) {
  _inherits(Title, _Phaser$State);

  function Title() {
    _classCallCheck(this, Title);

    return _possibleConstructorReturn(this, (Title.__proto__ || Object.getPrototypeOf(Title)).apply(this, arguments));
  }

  _createClass(Title, [{
    key: 'create',
    value: function create() {
      this.background = new _Background2.default(this.game, 'grass_bg');
      this.background.create();

      var style = { font: '65px Arial', fill: '#000000', align: 'center' };

      this.titleText = this.game.add.text(this.game.world.centerX, 300, 'Sonic BOOM!', style);
      this.titleText.anchor.setTo(0.5, 0.5);

      this.instructionsText = this.game.add.text(this.game.world.centerX, 400, 'Click anywhere to play', { font: '16px Arial', fill: '#000000', align: 'center' });
      this.instructionsText.anchor.setTo(0.5, 0.5);

      $('#name').show();
    }
  }, {
    key: 'update',
    value: function update() {
      var playerName = $("#name").val();
      if (playerName != "" && this.game.input.activePointer.justPressed()) {
        this.game.state.start('Main');
      }
    }
  }]);

  return Title;
}(Phaser.State);

exports.default = Title;

},{"../objects/Background":3}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJnYW1lXFxjb250cm9sbGVyc1xcSW50ZXJmYWNlLmpzIiwiZ2FtZVxcZ2FtZS5qcyIsImdhbWVcXG9iamVjdHNcXEJhY2tncm91bmQuanMiLCJnYW1lXFxvYmplY3RzXFxPYnN0YWNsZS5qcyIsImdhbWVcXG9iamVjdHNcXFBsYXllci5qcyIsImdhbWVcXHN0YXRlc1xcQm9vdC5qcyIsImdhbWVcXHN0YXRlc1xcR2FtZU92ZXIuanMiLCJnYW1lXFxzdGF0ZXNcXE1haW4uanMiLCJnYW1lXFxzdGF0ZXNcXFByZWxvYWRlci5qcyIsImdhbWVcXHN0YXRlc1xcVGl0bGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lDQU0sUztBQUNGLHVCQUFZLElBQVosRUFBa0I7QUFBQTs7QUFDZCxhQUFLLElBQUwsR0FBWSxJQUFaO0FBQ0EsYUFBSyxLQUFMLEdBQWEsQ0FBYjtBQUNBLGFBQUssSUFBTCxHQUFZLENBQVo7QUFDQSxhQUFLLFNBQUwsR0FBaUIsRUFBRSxRQUFGLENBQWpCO0FBQ0EsYUFBSyxRQUFMLEdBQWdCLEVBQUUsT0FBRixDQUFoQjtBQUNIOzs7O2lDQUVRO0FBQ0wsaUJBQUssS0FBTDtBQUNIOzs7eUNBRWdCO0FBQ2IsaUJBQUssU0FBTCxDQUFlLElBQWYsQ0FBb0IsWUFBWSxLQUFLLEtBQUwsRUFBaEM7QUFDSDs7O3dDQUVlO0FBQ1osaUJBQUssUUFBTCxDQUFjLElBQWQsQ0FBbUIsV0FBVyxLQUFLLElBQUwsRUFBWCxHQUF5QixHQUE1QztBQUNIOzs7bUNBRVU7QUFDUCxtQkFBTyxLQUFLLEtBQVo7QUFDSDs7O2dDQUVPO0FBQ0osaUJBQUssS0FBTCxHQUFhLENBQWI7QUFDQSxpQkFBSyxJQUFMLEdBQVksQ0FBWjtBQUNBLGlCQUFLLFNBQUwsQ0FBZSxJQUFmO0FBQ0EsaUJBQUssUUFBTCxDQUFjLElBQWQ7QUFDQSxpQkFBSyxTQUFMLENBQWUs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dUMsT0FBTyxRQUE5QyxFQUEzRSxDQUF4QjtBQUNBLFdBQUssZ0JBQUwsQ0FBc0IsTUFBdEIsQ0FBNkIsS0FBN0IsQ0FBbUMsR0FBbkMsRUFBd0MsR0FBeEM7O0FBRUEsUUFBRSxPQUFGLEVBQVcsSUFBWDtBQUNEOzs7NkJBRVE7QUFDUCxVQUFJLGFBQWEsRUFBRSxPQUFGLEVBQVcsR0FBWCxFQUFqQjtBQUNBLFVBQUcsY0FBYSxFQUFiLElBQW1CLEtBQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsYUFBaEIsQ0FBOEIsV0FBOUIsRUFBdEIsRUFBbUU7QUFDakUsYUFBSyxJQUFMLENBQVUsS0FBVixDQUFnQixLQUFoQixDQUFzQixNQUF0QjtBQUNEO0FBQ0Y7Ozs7RUFyQmlCLE9BQU8sSzs7a0JBd0JaLEsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY2xhc3MgSW50ZXJmYWNlIHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lKSB7XG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgICAgICB0aGlzLnRpbWUgPSAwO1xuICAgICAgICB0aGlzLnNjb3JlVGV4dCA9ICQoXCIjc2NvcmVcIik7XG4gICAgICAgIHRoaXMudGltZVRleHQgPSAkKFwiI3RpbWVcIik7XG4gICAgfVxuXG4gICAgY3JlYXRlKCkge1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgaW5jcmVtZW50U2NvcmUoKSB7XG4gICAgICAgIHRoaXMuc2NvcmVUZXh0LnRleHQoXCJTY29yZTogXCIgKyB0aGlzLnNjb3JlKyspO1xuICAgIH1cblxuICAgIGluY3JlbWVudFRpbWUoKSB7XG4gICAgICAgIHRoaXMudGltZVRleHQudGV4dChcIlRpbWU6IFwiICsgdGhpcy50aW1lKysgKyBcInNcIik7XG4gICAgfVxuXG4gICAgZ2V0U2NvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3JlO1xuICAgIH1cblxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgICAgdGhpcy50aW1lID0gMDtcbiAgICAgICAgdGhpcy5zY29yZVRleHQuc2hvdygpO1xuICAgICAgICB0aGlzLnRpbWVUZXh0LnNob3coKTtcbiAgICAgICAgdGhpcy5zY29yZVRleHQudGV4dChcIlNjb3JlOiBcIiArIHRoaXMuc2NvcmUpO1xuICAgICAgICB0aGlzLnRpbWVUZXh0LnRleHQoXCJUaW1lOiBcIiArIHRoaXMudGltZSArIFwic1wiKTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW50ZXJmYWNlOyIsImltcG9ydCBCb290IGZyb20gJy4vc3RhdGVzL0Jvb3QnO1xuaW1wb3J0IFByZWxvYWRlciBmcm9tICcuL3N0YXRlcy9QcmVsb2FkZXInO1xuaW1wb3J0IFRpdGxlIGZyb20gJy4vc3RhdGVzL1RpdGxlJztcbmltcG9ydCBNYWluIGZyb20gJy4vc3RhdGVzL01haW4nO1xuaW1wb3J0IEdhbWVPdmVyIGZyb20gJy4vc3RhdGVzL0dhbWVPdmVyJztcblxuY2xhc3MgR2FtZSBleHRlbmRzIFBoYXNlci5HYW1lIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIod2luZG93LmlubmVyV2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgd2luZG93LmlubmVySGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIFBoYXNlci5BVVRPKTtcbiAgICB0aGlzLnN0YXRlLmFkZCgnQm9vdCcsIEJvb3QsIGZhbHNlKTtcbiAgICB0aGlzLnN0YXRlLmFkZCgnUHJlbG9hZGVyJywgUHJlbG9hZGVyLCBmYWxzZSk7XG4gICAgdGhpcy5zdGF0ZS5hZGQoJ1RpdGxlJywgVGl0bGUsIGZhbHNlKTtcbiAgICB0aGlzLnN0YXRlLmFkZCgnTWFpbicsIE1haW4sIGZhbHNlKTtcbiAgICB0aGlzLnN0YXRlLmFkZCgnR2FtZU92ZXInLCBHYW1lT3ZlciwgZmFsc2UpO1xuXG4gICAgdGhpcy5zdGF0ZS5zdGFydCgnQm9vdCcpO1xuICB9XG59XG5cbm5ldyBHYW1lKCk7IiwiY2xhc3MgQmFja2dyb3VuZCB7XG4gICAgY29uc3RydWN0b3IoZ2FtZSwgdGV4dHVyZSkge1xuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgICAgICB0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBudWxsO1xuICAgIH1cblxuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gdGhpcy5nYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsXG4gICAgICAgICAgICB0aGlzLmdhbWUud2lkdGgsXG4gICAgICAgICAgICB0aGlzLmdhbWUuaGVpZ2h0LFxuICAgICAgICAgICAgdGhpcy50ZXh0dXJlKTtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLnRpbGVTY2FsZS5zZXRUbyh0aGlzLmJhY2tncm91bmQuaGVpZ2h0IC8gdGhpcy5iYWNrZ3JvdW5kLnRleHR1cmUuaGVpZ2h0KTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC50aWxlUG9zaXRpb24ueCAtPSAyO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmFja2dyb3VuZDsiLCJjbGFzcyBPYnN0YWNsZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihnYW1lLCBudW1PYnN0YWNsZXMsIGZyYW1lc1Blck9ic3RhY2xlKXtcblxuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgICAgICB0aGlzLm9ic3RhY2xlR3JvdXAgPSBudWxsO1xuICAgICAgICB0aGlzLnNwcml0ZUdyb3VwID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubnVtT2JzdGFjbGVzID0gbnVtT2JzdGFjbGVzO1xuICAgICAgICB0aGlzLmZyYW1lc1Blck9ic3RhY2xlID0gZnJhbWVzUGVyT2JzdGFjbGU7XG4gICAgICAgIHRoaXMudGltZXIgPSAxMDtcbiAgICAgICAgbGV0IHNlZWQgPSBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLnJhbmRvbSA9IG5ldyBQaGFzZXIuUmFuZG9tRGF0YUdlbmVyYXRvcihbc2VlZF0pO1xuXG4gICAgICAgIHRoaXMuaW5pdE9ic3RhY2xlcygpO1xuICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7IFxuICAgICAgICAgICAgdGhpcy5vYnN0YWNsZVNwZWVkID0gdGhpcy5vYnN0YWNsZVNwZWVkICsgMTAwIDtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2luc2lkZSBvZiB0aGUgdGltb3V0JylcbiAgICAgICAgfSwgNzAwMCk7XG4gICAgfVxuICAgIGluaXRPYnN0YWNsZXMoKXtcbiAgICAgICAgdGhpcy5vYnN0YWNsZVNwZWVkID0gMzAwO1xuICAgICAgICB0aGlzLm9ic3RhY2xlTWluU2l6ZSA9IDUwO1xuICAgICAgICB0aGlzLm9ic3RhY2xlTWF4U2l6ZSA9IDIwMDtcblxuICAgICAgICB0aGlzLnNwcml0ZUdyb3VwID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xuICAgICAgICB0aGlzLnNwcml0ZUdyb3VwLmVuYWJsZUJvZHkgPSB0cnVlO1xuICAgICAgICB0aGlzLnNwcml0ZUdyb3VwLmNyZWF0ZU11bHRpcGxlKDEwLCAnYmlyZHMnKTtcblxuICAgIH1cblxuICAgIGNyZWF0ZSgpe1xuICAgICAgICBsZXQgb2JzdGFjbGUgPSB0aGlzLnNwcml0ZUdyb3VwLmdldEZpcnN0RGVhZCh0cnVlKTtcblxuICAgICAgICAvL3RoaXMuc3ByaXRlR3JvdXAucmVzZXRDaGlsZChvYnN0YWNsZSwgdGhpcy5nYW1lLndvcmxkLndpZHRoLCB0aGlzLnJhbmRvbS5pbnRlZ2VySW5SYW5nZSgwLCB0aGlzLmdhbWUud29ybGQuaGVpZ2h0IC0gb2JzdGFjbGVTaXplKSwgb2JzdGFjbGVTcHJpdGVUZXh0dXJlKTtcblxuICAgICAgICBvYnN0YWNsZS5yZXNldCh0aGlzLmdhbWUud29ybGQud2lkdGgsIHRoaXMucmFuZG9tLmludGVnZXJJblJhbmdlKDAsIHRoaXMuZ2FtZS53b3JsZC5oZWlnaHQpKTtcblxuICAgICAgICBsZXQgcmFuZG9tQmlyZCA9IHRoaXMucmFuZG9tLmludGVnZXJJblJhbmdlKDAsIHRoaXMubnVtT2JzdGFjbGVzIC8gdGhpcy5mcmFtZXNQZXJPYnN0YWNsZSkgKiB0aGlzLmZyYW1lc1Blck9ic3RhY2xlO1xuXG4gICAgICAgIG9ic3RhY2xlLmZyYW1lID0gcmFuZG9tQmlyZDtcbiAgICAgICAgb2JzdGFjbGUuYW5pbWF0aW9ucy5hZGQoJ2ZseScsIFtyYW5kb21CaXJkLCByYW5kb21CaXJkICsgMV0sIDUsIHRydWUpO1xuICAgICAgICBvYnN0YWNsZS5hbmltYXRpb25zLnBsYXkoJ2ZseScpO1xuICAgICAgICBvYnN0YWNsZS5hbmNob3Iuc2V0VG8oLjUsLjUpO1xuICAgICAgICBvYnN0YWNsZS5zY2FsZS54ID0gLTAuNTtcbiAgICAgICAgb2JzdGFjbGUuc2NhbGUueSA9IDAuNVxuICAgICAgICAvL29ic3RhY2xlLnNjYWxlLnNldCgwLjUpO1xuXG5cbiAgICAgICAgb2JzdGFjbGUuYm9keS5ncmF2aXR5LnkgPSAwO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm9ic3RhY2xlU3BlZWQpXG4gICAgICAgIG9ic3RhY2xlLmJvZHkudmVsb2NpdHkueCA9IC0gdGhpcy5vYnN0YWNsZVNwZWVkO1xuICAgICAgICBvYnN0YWNsZS5ib2R5LmltbW92YWJsZSA9IHRydWU7XG5cbiAgICAgICAgLy9XaGVuIHRoZSBibG9jayBsZWF2ZXMgdGhlIHNjcmVlbiwga2lsbCBpdFxuICAgICAgICBvYnN0YWNsZS5jaGVja1dvcmxkQm91bmRzID0gdHJ1ZTtcbiAgICAgICAgb2JzdGFjbGUub3V0T2ZCb3VuZHNLaWxsID0gdHJ1ZTtcblxuXG4gICAgfVxuXG4gICAgcmVuZGVyKGRlYnVnKSB7XG4gICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICAgbGV0IGdhbWUgPSB0aGlzLmdhbWU7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZUdyb3VwLmZvckVhY2goZnVuY3Rpb24oc3ByaXRlKSB7XG4gICAgICAgICAgICAgICAgZ2FtZS5kZWJ1Zy5ib2R5KHNwcml0ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBPYnN0YWNsZTsiLCJjbGFzcyBQbGF5ZXIge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5pc1Jpc2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNwcml0ZSA9IG51bGw7XG4gICAgfVxuXG4gICAgY3JlYXRlKCkge1xuICAgICAgICBsZXQgcGxheWVyU3ByaXRlID0gbmV3IFBoYXNlci5HcmFwaGljcyh0aGlzLmdhbWUpXG4gICAgICAgICAgICAuYmVnaW5GaWxsKFBoYXNlci5Db2xvci5oZXhUb1JHQignIzJjM2U1MCcpLCAxKVxuICAgICAgICAgICAgLmRyYXdSZWN0KDAsIDAsIDEwMCwgMTAwKTtcblxuICAgICAgICBsZXQgc3ByaXRlVGV4dHVyZSA9IHBsYXllclNwcml0ZS5nZW5lcmF0ZVRleHR1cmUoKTtcblxuICAgICAgICB0aGlzLnNwcml0ZSA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLCB0aGlzLmdhbWUud29ybGQuY2VudGVyWSwgJ3BsYXllcicpO1xuICAgICAgICAvL3RoaXMuc3ByaXRlID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5nYW1lLndvcmxkLmNlbnRlclgsIHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJZLCBzcHJpdGVUZXh0dXJlKTtcblxuICAgICAgICAvL3RoaXMuc3ByaXRlLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgIHRoaXMuc3ByaXRlLnNjYWxlLnNldCgwLjMpO1xuICAgICAgICAvL3RoaXMuc3ByaXRlLndpZHRoID0gMTAwO1xuICAgICAgICAvL3RoaXMuc3ByaXRlLmhlaWdodCA9IDUwO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLnNwcml0ZSk7XG4gICAgICAgIHRoaXMuc3ByaXRlLmVuYWJsZUJvZHkgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuc3ByaXRlLmFuaW1hdGlvbnMuYWRkKCdmbHknLCBQaGFzZXIuQW5pbWF0aW9uLmdlbmVyYXRlRnJhbWVOYW1lcygnJywgMSwgMiwgJy5wbmcnLCA0KSwgNSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuc3ByaXRlLmFuaW1hdGlvbnMucGxheSgnZmx5Jyk7XG5cbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5ncmF2aXR5LnkgPSA1MDA7XG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkudmVsb2NpdHkueSA9IC0yMDA7XG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkubWF4VmVsb2NpdHkueSA9IDIwMDtcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5jb2xsaWRlV29ybGRCb3VuZHMgPSBmYWxzZTtcblxuICAgICAgICAvL2NhbGN1bGF0ZSBjZW50cmUgZm9yIGJvdW5kaW5nIGJveFxuICAgICAgICBsZXQgc2NhbGVGYWN0b3IgPSAwLjk7XG4gICAgICAgIC8qXG4gICAgICAgIGxldCBuZXdXaWR0aCA9IHRoaXMuc3ByaXRlLndpZHRoICogc2NhbGVGYWN0b3I7XG4gICAgICAgIGxldCBuZXdIZWlnaHQgPSB0aGlzLnNwcml0ZS5oZWlnaHQgKiBzY2FsZUZhY3RvclxuICAgICAgICBsZXQgY2VudHJlWCA9ICh0aGlzLnNwcml0ZS53aWR0aCAtIChuZXdXaWR0aCkpIC8yO1xuICAgICAgICBsZXQgY2VudHJlWSA9ICh0aGlzLnNwcml0ZS5oZWlnaHQgLSAobmV3SGVpZ2h0KSkgLzI7XG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkud2lkdGggKj0gc2NhbGVGYWN0b3I7Ki9cbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5oZWlnaHQgKj0gc2NhbGVGYWN0b3I7LypcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5zZXRTaXplKG5ld1dpZHRoLCBuZXdIZWlnaHQsIGNlbnRyZVgsIGNlbnRyZVkpOyovXG5cbiAgICB9XG5cbiAgICBzZXRSaXNpbmcoKXtcbiAgICAgICAgdGhpcy5pc1Jpc2luZyA9IHRydWU7XG4gICAgfVxuXG4gICAgc2V0RmFsbGluZygpe1xuICAgICAgICB0aGlzLmlzUmlzaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaW5jcmVhc2VWZXJ0aWNhbFZlbG9jaXR5KCl7XG4gICAgICAgIHRoaXMuc3ByaXRlLmJvZHkudmVsb2NpdHkueSAtPSAzMDtcbiAgICB9XG5cbiAgICBpc091dE9mQm91bmRzKCl7XG5cbiAgICAgICAgbGV0IHBvc2l0aW9uID0gdGhpcy5zcHJpdGUuYm9keS5wb3NpdGlvbi55KzUwO1xuICAgICAgICByZXR1cm4gcG9zaXRpb24gPiB0aGlzLmdhbWUud29ybGQuaGVpZ2h0IHx8IHBvc2l0aW9uIDwgMDtcblxuICAgIH1cblxuICAgIHJlbmRlcihkZWJ1Zykge1xuICAgICAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5kZWJ1Zy5ib2R5KHRoaXMuc3ByaXRlKTtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5kZWJ1Zy5waXhlbCh0aGlzLnNwcml0ZS54LCB0aGlzLnNwcml0ZS55LCAncmVkJywgNCk7XG4gICAgICAgICAgICB0aGlzLmdhbWUuZGVidWcuc3ByaXRlQm91bmRzKHRoaXMuc3ByaXRlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGxheWVyOyIsImNsYXNzIEJvb3QgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuICAgIHByZWxvYWQoKSB7XG4gICAgICAgIHRoaXMuZ2FtZS5sb2FkLmF0bGFzKCdwcmVsb2FkZXInLCAnaW1hZ2VzL3ByZWxvYWRlci5wbmcnLCAnaW1hZ2VzL3ByZWxvYWRlci5qc29uJyk7XG4gICAgfVxuICAgIGNyZWF0ZSAoKSB7XG4gICAgICAgIHRoaXMuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdQcmVsb2FkZXInKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJvb3Q7IiwiY2xhc3MgR2FtZU92ZXIgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgdmFyIHN0eWxlID0geyBmb250OiAnNjVweCBBcmlhbCcsIGZpbGw6ICcjMDAwMDAwJywgYWxpZ246ICdjZW50ZXInfTtcbiAgICAgICAgdGhpcy50aXRsZVRleHQgPSB0aGlzLmdhbWUuYWRkLnRleHQodGhpcy5nYW1lLndvcmxkLmNlbnRlclgsMTAwLCAnR2FtZSBPdmVyIScsIHN0eWxlKTtcbiAgICAgICAgdGhpcy50aXRsZVRleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICAgICAgICB0aGlzLmNvbmdyYXRzVGV4dCA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmdhbWUud29ybGQuY2VudGVyWCwgMjAwLCAnWW91IFdpbiEnLCB7IGZvbnQ6ICczMnB4IEFyaWFsJywgZmlsbDogJyMwMDAnLCBhbGlnbjogJ2NlbnRlcid9KTtcbiAgICAgICAgdGhpcy5jb25ncmF0c1RleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICAgICAgICB0aGlzLmluc3RydWN0aW9uVGV4dCA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmdhbWUud29ybGQuY2VudGVyWCwgMzAwLCAnQ2xpY2sgVG8gUGxheSBBZ2FpbicsIHsgZm9udDogJzE2cHggQXJpYWwnLCBmaWxsOiAnIzAwMCcsIGFsaWduOiAnY2VudGVyJ30pO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9uVGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgIH1cblxuICAgIHJlc3RhcnRHYW1lKCkge1xuICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoXCJNYWluXCIpO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYodGhpcy5nYW1lLmlucHV0LmFjdGl2ZVBvaW50ZXIuanVzdFByZXNzZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNYWluJyk7XG4gICAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR2FtZU92ZXI7XG4iLCJpbXBvcnQgUGxheWVyIGZyb20gJy4uL29iamVjdHMvUGxheWVyJztcbmltcG9ydCBPYnN0YWNsZSBmcm9tICcuLi9vYmplY3RzL09ic3RhY2xlJztcbmltcG9ydCBJbnRlcmZhY2UgZnJvbSAnLi4vY29udHJvbGxlcnMvSW50ZXJmYWNlJztcbmltcG9ydCBCYWNrZ3JvdW5kIGZyb20gJy4uL29iamVjdHMvQmFja2dyb3VuZCc7XG5cbmNsYXNzIE1haW4gZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgJCgnI25hbWUnKS5oaWRlKCk7XG4gICAgICAgIC8vRW5hYmxlIEFyY2FkZSBQaHlzaWNzXG4gICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLnN0YXJ0U3lzdGVtKFBoYXNlci5QaHlzaWNzLkFSQ0FERSk7XG5cbiAgICAgICAgLy9TZXQgdGhlIGdhbWVzIGJhY2tncm91bmQgY29sb3VyXG4gICAgICAgIHRoaXMuZ2FtZS5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2NlY2VjZSc7XG5cbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gbmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAnbW91bnRhaW5fYmcnKTtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLmNyZWF0ZSgpO1xuXG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IFBsYXllcih0aGlzLmdhbWUpO1xuICAgICAgICB0aGlzLnBsYXllci5jcmVhdGUoKTtcblxuICAgICAgICB0aGlzLm9ic3RhY2xlcyA9IG5ldyBPYnN0YWNsZSh0aGlzLmdhbWUsIDEwLCAyKTtcblxuICAgICAgICB0aGlzLmludGVyZmFjZSA9IG5ldyBJbnRlcmZhY2UodGhpcy5nYW1lKTtcbiAgICAgICAgdGhpcy5pbnRlcmZhY2UuY3JlYXRlKCk7XG5cbiAgICAgICAgdGhpcy5hZGRDb250cm9scygpO1xuICAgICAgICB0aGlzLmFkZFRpbWVycygpO1xuXG4gICAgICAgIC8vIHNvY2tldC5pb1xuICAgICAgICB0aGlzLnNvY2tldCA9IGlvKCk7XG4gICAgICAgIHRoaXMuc29ja2V0Lm9uKCdjb250cm9sLWNoYW5nZScsIChtc2cpPT4ge1xuICAgICAgICAgICAgaWYobXNnID09PSAnMCcpe3RoaXMucGxheWVyLnNldEZhbGxpbmcoKX0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc2V0UmlzaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiBcblxuXG5cbiAgICB1cGRhdGUoKSB7XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tPdmVybGFwKHRoaXMub2JzdGFjbGVzLnNwcml0ZUdyb3VwLCB0aGlzLnBsYXllci5zcHJpdGUpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kR2FtZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy90aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUub3ZlcmxhcCgsICwgdGhpcy5lbmRHYW1lLCBudWxsLCB0aGlzKTtcblxuICAgICAgICAvLyBDaGVjayBpZiBvdXQgb2YgYm91bmRzXG4gICAgICAgIGlmKHRoaXMucGxheWVyLmlzT3V0T2ZCb3VuZHMoKSl7XG4gICAgICAgICAgICB0aGlzLmVuZEdhbWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmICBoZWxpY29wdGVyIGlzIHJpc2luZ1xuICAgICAgICBpZih0aGlzLnBsYXllci5pc1Jpc2luZyl7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5pbmNyZWFzZVZlcnRpY2FsVmVsb2NpdHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC51cGRhdGUoKTtcbiAgICB9XG4gICAgY2hlY2tPdmVybGFwKHNwcml0ZUEsIHNwcml0ZUIpIHtcbiAgICAgICAgXG4gICAgICAgICAgICB2YXIgYm91bmRzQSA9IHNwcml0ZUEuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICB2YXIgYm91bmRzQiA9IHNwcml0ZUIuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICBib3VuZHNBLmhlaWdodCA9IGJvdW5kc0EuaGVpZ2h0IC0gMTA7XG4gICAgICAgICAgICBib3VuZHNBLndpZHRoID0gYm91bmRzQS53aWR0aCAtIDEwOyAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKFBoYXNlci5SZWN0YW5nbGUuaW50ZXJzZWN0cyhib3VuZHNBLCBib3VuZHNCKSAmJiBib3VuZHNBLndpZHRoIDwgMjAwKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vcmV0dXJuIFBoYXNlci5SZWN0YW5nbGUuaW50ZXJzZWN0cyhib3VuZHNBLCBib3VuZHNCKTtcbiAgICAgICAgXG4gICAgICAgIH1cblxuICAgIGFkZENvbnRyb2xzKCl7XG4gICAgICAgIHRoaXMuZ2FtZS5pbnB1dC5vbkRvd24uYWRkKHRoaXMucGxheWVyLnNldFJpc2luZywgdGhpcy5wbGF5ZXIpO1xuICAgICAgICB0aGlzLmdhbWUuaW5wdXQub25VcC5hZGQodGhpcy5wbGF5ZXIuc2V0RmFsbGluZywgdGhpcy5wbGF5ZXIpO1xuICAgIH1cblxuICAgIGFkZFRpbWVycygpe1xuICAgICAgICB0aGlzLmdhbWUudGltZS5ldmVudHMubG9vcCg1MDAwLCB0aGlzLm9ic3RhY2xlcy5jcmVhdGUsIHRoaXMub2JzdGFjbGVzKTtcbiAgICAgICAgdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmxvb3AoUGhhc2VyLlRpbWVyLlNFQ09ORCwgdGhpcy5pbnRlcmZhY2UuaW5jcmVtZW50VGltZSwgdGhpcy5pbnRlcmZhY2UpO1xuICAgICAgICB0aGlzLmdhbWUudGltZS5ldmVudHMubG9vcCgxLCB0aGlzLmludGVyZmFjZS5pbmNyZW1lbnRTY29yZSwgdGhpcy5pbnRlcmZhY2UpO1xuICAgIH1cblxuICAgIGVuZEdhbWUoKXtcblxuICAgICAgICB2YXIgcG9zdERhdGEgPSB7XG4gICAgICAgICAgIFwiaWRcIjogdGhpcy51dWlkdjQoKSxcbiAgICAgICAgICAgXCJuYW1lXCI6ICQoJyNuYW1lJykudmFsKCksXG4gICAgICAgICAgIFwic2NvcmVcIjogdGhpcy5pbnRlcmZhY2UuZ2V0U2NvcmUoKSxcbiAgICAgICAgICAgXCJ0aW1lXCI6IChuZXcgRGF0ZSkuZ2V0VGltZSgpXG4gICAgICAgIH1cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vcW45MDdmOXZ3ZS5leGVjdXRlLWFwaS5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbS9wcm9kL3Njb3JlcycsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShwb3N0RGF0YSksXG4gICAgICAgICAgICBkYXRhVHlwZTogJ0pTT04nLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgY3Jvc3NEb21haW46IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpKTtcbiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCgnc2NvcmUnLCBKU09OLnN0cmluZ2lmeShwb3N0RGF0YSkpO1xuICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ0dhbWVPdmVyJyk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLnBsYXllci5yZW5kZXIoZmFsc2UpO1xuICAgICAgICB0aGlzLm9ic3RhY2xlcy5yZW5kZXIoZmFsc2UpO1xuICAgIH1cblxuICAgIHV1aWR2NCgpIHtcbiAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgdmFyIHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLCB2ID0gYyA9PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpO1xuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgICB9KTtcbiAgICB9XG59XG5cblxuXG5leHBvcnQgZGVmYXVsdCBNYWluOyIsImNsYXNzIFByZWxvYWRlciBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG4gICAgcHJlbG9hZCgpIHtcbiAgICAgICAgLy90aGlzLmFzc2V0ID0gdGhpcy5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLCB0aGlzLmdhbWUud29ybGQuY2VudGVyWSwgJ3ByZWxvYWRlcicpO1xuICAgICAgICAvL3RoaXMuYXNzZXQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICAgICAgICB0aGlzLmxvYWQub25Mb2FkQ29tcGxldGUuYWRkT25jZSh0aGlzLm9uTG9hZENvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgLy90aGlzLmxvYWQuc2V0UHJlbG9hZFNwcml0ZSh0aGlzLmFzc2V0KTtcblxuICAgICAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnYmFja2dyb3VuZCcsICdpbWFnZXMvc2t5LnBuZycpO1xuICAgICAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnZ3Jhc3NfYmcnLCAnaW1hZ2VzL2dyYXNzX2JnLnBuZycpO1xuICAgICAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnbW91bnRhaW5fYmcnLCAnaW1hZ2VzL21vdW50YWluX2JnLnBuZycpO1xuICAgICAgICAvL3RoaXMuZ2FtZS5sb2FkLmltYWdlKCdiYWxsb29uXzEnLCAnaW1hZ2VzL2JhbGxvb25fMS5wbmcnKTtcbiAgICAgICAgdGhpcy5nYW1lLmxvYWQuYXRsYXMoJ2JpcmRzJywgJ2ltYWdlcy9iaXJkcy5wbmcnLCAnaW1hZ2VzL2JpcmRzLmpzb24nKTtcbiAgICAgICAgdGhpcy5nYW1lLmxvYWQuYXRsYXMoJ3BsYXllcicsICdpbWFnZXMvcGxheWVyLnBuZycsICdpbWFnZXMvcGxheWVyLmpzb24nKTtcbiAgICB9XG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIC8vdGhpcy5hc3NldC5jcm9wRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAvL3RoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnTWFpbicpO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYoISF0aGlzLnJlYWR5KSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ1RpdGxlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkxvYWRDb21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5yZWFkeSA9IHRydWU7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQcmVsb2FkZXI7IiwiaW1wb3J0IEJhY2tncm91bmQgZnJvbSAnLi4vb2JqZWN0cy9CYWNrZ3JvdW5kJztcblxuY2xhc3MgVGl0bGUgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuICBjcmVhdGUoKSB7XG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gbmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAnZ3Jhc3NfYmcnKTtcbiAgICAgIHRoaXMuYmFja2dyb3VuZC5jcmVhdGUoKTtcblxuICAgIHZhciBzdHlsZSA9IHsgZm9udDogJzY1cHggQXJpYWwnLCBmaWxsOiAnIzAwMDAwMCcsIGFsaWduOiAnY2VudGVyJ307XG5cbiAgICB0aGlzLnRpdGxlVGV4dCA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmdhbWUud29ybGQuY2VudGVyWCwgMzAwLCAnU29uaWMgQk9PTSEnLCBzdHlsZSk7XG4gICAgdGhpcy50aXRsZVRleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zVGV4dCA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmdhbWUud29ybGQuY2VudGVyWCwgNDAwLCAnQ2xpY2sgYW55d2hlcmUgdG8gcGxheScsIHsgZm9udDogJzE2cHggQXJpYWwnLCBmaWxsOiAnIzAwMDAwMCcsIGFsaWduOiAnY2VudGVyJ30pO1xuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zVGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gICAgJCgnI25hbWUnKS5zaG93KCk7XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgdmFyIHBsYXllck5hbWUgPSAkKFwiI25hbWVcIikudmFsKCk7XG4gICAgaWYocGxheWVyTmFtZSE9IFwiXCIgJiYgdGhpcy5nYW1lLmlucHV0LmFjdGl2ZVBvaW50ZXIuanVzdFByZXNzZWQoKSkge1xuICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNYWluJyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpdGxlOyJdfQ==
